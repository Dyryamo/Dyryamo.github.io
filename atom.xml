<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>学海无涯</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-10-10T19:01:37.184Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Mr zhong</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>mysql</title>
    <link href="http://yoursite.com/2018/10/11/mysql/"/>
    <id>http://yoursite.com/2018/10/11/mysql/</id>
    <published>2018-10-10T18:59:33.000Z</published>
    <updated>2018-10-10T19:01:37.184Z</updated>
    
    <content type="html"><![CDATA[<h1 id="解决mysql插入中文字符异常02-48-47"><a href="#解决mysql插入中文字符异常02-48-47" class="headerlink" title="解决mysql插入中文字符异常02:48:47"></a>解决mysql插入中文字符异常02:48:47</h1><pre><code>Error Code: 1064. You have an error in your SQL syntax; check the manual thatcorresponds to your MySQL server version for the right syntax to use near &apos;varchar(100) not null&apos; at line 1    0.00020 sec1.在mysql的安装目录下找到my.ini,作如下修改：[mysqld]character-set-server=utf8mb4[mysql]default-character-set=utf8mb42. 将已经建好的表也转换成utf8mb4命令：alter table TABLE_NAME convert to character set utf8mb4 collate utf8mb4_bin; （将TABLE_NAME替换成你的表名）修改后重启Mysql</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;解决mysql插入中文字符异常02-48-47&quot;&gt;&lt;a href=&quot;#解决mysql插入中文字符异常02-48-47&quot; class=&quot;headerlink&quot; title=&quot;解决mysql插入中文字符异常02:48:47&quot;&gt;&lt;/a&gt;解决mysql插入中文字符异常02
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://yoursite.com/2018/09/27/JavaNote-md/"/>
    <id>http://yoursite.com/2018/09/27/JavaNote-md/</id>
    <published>2018-09-27T15:06:51.824Z</published>
    <updated>2018-09-27T15:06:51.824Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java-包"><a href="#Java-包" class="headerlink" title="Java 包"></a>Java 包</h1><h2 id="定义和作用"><a href="#定义和作用" class="headerlink" title="定义和作用"></a>定义和作用</h2><pre><code>包是java有效管理类的一个机制，不同java源程序可能出现名字相同的累，可以使用包名进行区分</code></pre><h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span></span><br><span class="line"><span class="keyword">package</span> <span class="title">sun.com.cn</span></span><br></pre></td></tr></table></figure><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ol><li>如果一个类有包名，则不能在任意位置存放，否则虚拟无法加载，</li><li>存储文件的目录结构要有包相应的结构</li><li>可以将源文件直接放在对应目录下编译，则字节码默认保存在相应目录</li></ol><h2 id="运行有包名的主类"><a href="#运行有包名的主类" class="headerlink" title="运行有包名的主类"></a>运行有包名的主类</h2><pre><code>比如tom.jiafei则必须到tom/jiafei 上一级目录执行</code></pre><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java tom<span class="selector-class">.jiafei</span>.主类名</span><br></pre></td></tr></table></figure><h1 id="abstract-类，abstract-方法"><a href="#abstract-类，abstract-方法" class="headerlink" title="abstract 类，abstract 方法"></a>abstract 类，abstract 方法</h1><pre><code>用关键字abstract修饰的类称为abstract类（抽象类）用abstract修饰的方法称为abstract方法，abstract修饰的方法必须在子类中重写</code></pre><h1 id="Java-实用类"><a href="#Java-实用类" class="headerlink" title="Java 实用类"></a>Java 实用类</h1><h2 id="Java-Math类"><a href="#Java-Math类" class="headerlink" title="Java Math类"></a>Java Math类</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java-包&quot;&gt;&lt;a href=&quot;#Java-包&quot; class=&quot;headerlink&quot; title=&quot;Java 包&quot;&gt;&lt;/a&gt;Java 包&lt;/h1&gt;&lt;h2 id=&quot;定义和作用&quot;&gt;&lt;a href=&quot;#定义和作用&quot; class=&quot;headerlink&quot; title=
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>javaweb</title>
    <link href="http://yoursite.com/2018/09/23/javaweb/"/>
    <id>http://yoursite.com/2018/09/23/javaweb/</id>
    <published>2018-09-23T09:48:27.000Z</published>
    <updated>2018-10-13T04:46:09.531Z</updated>
    
    <content type="html"><![CDATA[<h1 id="html"><a href="#html" class="headerlink" title="html"></a>html</h1><h2 id="表单"><a href="#表单" class="headerlink" title="表单"></a><form action="“url”" method="get | post" name="name" onsubmit="" target=""><form>表单</form></form></h2><pre><code>action 属性 该属性用来指定处理数据的url地址method 属性 该属性制定将数据传到服务器的方式onSubmit 属性 制定用户点击时触发的事件name 该表单的名称target 制定输入结果显示在哪一个窗口，1. _blank 在新窗口中打开2. 在同一个窗口中打开_self3. 在上一级窗口打开_parent4. 在浏览器整个窗口打开  _top</code></pre><h1 id="常见的网络状态"><a href="#常见的网络状态" class="headerlink" title="常见的网络状态"></a>常见的网络状态</h1><p>200: 一切正常<br>300/301： 页面重定向/跳转<br>404：资源不存在<br>403：权限不足<br>500：服务器内部错误，（代码有错）</p><h1 id="jsp-定义"><a href="#jsp-定义" class="headerlink" title="jsp 定义"></a>jsp 定义</h1><pre><code>jsp: html 嵌入java代码&lt;% java 代码%&gt;</code></pre><h1 id="默认index"><a href="#默认index" class="headerlink" title="默认index"></a>默认index</h1><pre><code>在/WEB_INF/web.xml中设置默认打index</code></pre><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;welcome-<span class="built_in">file</span>-<span class="built_in">list</span>&gt;</span><br><span class="line">&lt;welcome-<span class="built_in">file</span>&gt;index.jsp&lt;/welcome-<span class="built_in">file</span>&gt;</span><br><span class="line">&lt;/welcome-<span class="built_in">file</span>-<span class="built_in">list</span>&gt;</span><br></pre></td></tr></table></figure><h1 id="虚拟路径"><a href="#虚拟路径" class="headerlink" title="虚拟路径"></a>虚拟路径</h1><pre><code>将web项目放在webapps之外打地方  在server.html 中&lt;Engine&gt;下的&lt;host&gt;钟添加&lt;Context&gt;</code></pre><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">方式 1</span><br><span class="line">&lt;Context <span class="attribute">docBase</span>=<span class="string">""</span> <span class="attribute">path</span>=<span class="string">""</span>&gt;</span><br><span class="line">docBase: 实际路径</span><br><span class="line">path： 虚拟路径（绝对路径或相对路径（相对webapps））</span><br><span class="line">&lt;Context <span class="attribute">docBase</span>=<span class="string">"PATH"</span> <span class="attribute">path</span>=<span class="string">"/JspProject"</span>&gt;</span><br><span class="line">访问webapps下打JspProject 相当于访问PATH</span><br><span class="line"></span><br><span class="line">方式 2</span><br><span class="line">在catalin中的localhost钟新建 项目名.xml</span><br><span class="line">打开 .xml 文件添加</span><br><span class="line">&lt;Context <span class="attribute">docBase</span>=<span class="string">"PATH"</span> <span class="attribute">path</span>=<span class="string">"/JspProject"</span>&gt;</span><br></pre></td></tr></table></figure><h1 id="虚拟主机"><a href="#虚拟主机" class="headerlink" title="虚拟主机"></a>虚拟主机</h1><pre><code>例子，通过www.test.com 访问本机a. 在conf/server.xml下，添加Host</code></pre><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Host appBase=<span class="string">"实际项目路径"</span> name=<span class="string">"www.test.com"</span>&gt;</span><br><span class="line">&lt;context docBase=<span class="string">"实际项目名"</span> path=<span class="string">"/"</span> /&gt;</span><br><span class="line">&lt;/Host&gt;</span><br><span class="line"><span class="selector-tag">b</span>.修改Engine 的dufaultHost 为 www<span class="selector-class">.test</span><span class="selector-class">.com</span></span><br><span class="line">    c.修改本地域名解析，hosts文件</span><br><span class="line">    （ubuntu 下的/etc/hosts,windows 下 C:\windows\System32\drivers\etc\host）</span><br></pre></td></tr></table></figure><pre><code>以上虚拟路径和虚拟主机不常用</code></pre><h1 id="Jsp执行流程"><a href="#Jsp执行流程" class="headerlink" title="Jsp执行流程"></a>Jsp执行流程</h1><pre><code>第一次访问，服务端将jsp翻译成java，再讲java编译成class文件</code></pre><h1 id="Eclipse-安装"><a href="#Eclipse-安装" class="headerlink" title="Eclipse 安装"></a>Eclipse 安装</h1><pre><code>说在前面Eclipse 安装首先配置jdk，jdk版本一定要与eclipse版本适配(曾经，用32位jdk配置64位eclipse，被坑了一上午)</code></pre><h2 id="jdk-安装"><a href="#jdk-安装" class="headerlink" title="jdk 安装"></a>jdk 安装</h2><pre><code>下载jdk，解压到目录，然后添加环境变量我直接添加在/etc/profile</code></pre><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/lib/jvm/jdk1.8.0_181</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JRE_HOME</span>=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">CLASSPATH</span>=.:$&#123;JAVA_HOME&#125;/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=.:$&#123;JAVA_HOME&#125;/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p><a href="https://www.oracle.com/technetwork/cn/java/javase/downloads/jdk8-downloads-2133151-zhs.html" target="_blank" rel="noopener">jdk 地址</a><br><a href="https://www.eclipse.org/downloads/download.php?file=/oomph/epp/2018-09/R/eclipse-inst-linux64.tar.gz&amp;mirror_id=1093" target="_blank" rel="noopener">eclipse</a></p><h2 id="Eclipse-安装-1"><a href="#Eclipse-安装-1" class="headerlink" title="Eclipse 安装"></a>Eclipse 安装</h2><pre><code>配置玩jdk之后，下载Eclipse解压，然后运行./eclipse_inst 然后无脑操作</code></pre><h2 id="tomcat配置关联"><a href="#tomcat配置关联" class="headerlink" title="tomcat配置关联"></a>tomcat配置关联</h2><pre><code>首先在windows 下的preference钟找到runtime Environment 钟添加Apache Tomcat,我这边悬着tomcat 8.5然后在servers中配置tomcat，同样是tomcat8.5然后新建一个other/dynamic web project 项目</code></pre><h1 id="Jsp-的页面元素"><a href="#Jsp-的页面元素" class="headerlink" title="Jsp 的页面元素"></a>Jsp 的页面元素</h1><h2 id="scriptlet"><a href="#scriptlet" class="headerlink" title="scriptlet"></a>scriptlet</h2><ol><li>&lt;% 局部变量 java语句%&gt;</li><li>&lt;%!全局变量 定义方法% &gt;<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">!</span></span><br><span class="line"><span class="ruby">public String BookName;<span class="regexp">//</span>全局变量</span></span><br><span class="line"><span class="ruby">public void init()&#123;</span></span><br><span class="line"><span class="ruby">BookName = <span class="string">"java book"</span>;</span></span><br><span class="line"><span class="ruby">&#125;</span></span><br><span class="line"><span class="ruby"></span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> </span></span><br><span class="line"><span class="ruby">String name = <span class="string">"zhangsan"</span>;<span class="regexp">//</span>局部变量</span></span><br><span class="line"><span class="ruby">out.print(<span class="string">"hello..."</span>+name );</span></span><br><span class="line"><span class="ruby">init();</span></span><br><span class="line"><span class="ruby"></span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby">BookName </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--一般而言，修改web.xml,配置文件，java代码，需要重启tomcat服务--&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="comment">&lt;!--修改jsp，css，html,js不需要--&gt;</span></span></span><br></pre></td></tr></table></figure></li></ol><h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><h3 id="page指令"><a href="#page指令" class="headerlink" title="page指令"></a>page指令</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">网页开头</span><br><span class="line">&lt;%@<span class="built_in"> page </span><span class="attribute">language</span>=<span class="string">"java"</span> <span class="attribute">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    <span class="attribute">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span><br></pre></td></tr></table></figure><pre><code>page指定属性</code></pre><ol><li>language : jsp 页面使用打脚本语言</li><li>import 导入类</li><li>pageEncoding:jsp 自生编码</li><li>contentType： 浏览器解析jsp编码</li></ol><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><ol><li>html 注释<!----></li><li>java 注释// /**/</li><li>jsp注释 &lt;%– –%&gt;</li></ol><p>##jsp 九大内置对象</p><h2 id="out"><a href="#out" class="headerlink" title="out"></a>out</h2><pre><code>向客户端输出内容</code></pre><h2 id="request"><a href="#request" class="headerlink" title="request"></a>request</h2><pre><code>请求对象，存储客户端向服务端发送打请求信息常见方法: </code></pre><ol><li>String getParameter(String name);根据请求打字段名key，返回字段值value</li><li>String[] getParameterValues(String name); 根据请求打字段名key 返回多个字段value</li><li>void setCharacterEncoding（“编码格式utf-8”）设置请求编码(tomcat7以前默认编码ios-8859-1，tomcat8以后默认编码utf-8）</li><li>getRequestDispatcher().forward();请求转发的方式跳转页面 A-&gt;B</li><li>getServerContext() 或请项目的ServletContext对象</li></ol><h2 id="pageContent"><a href="#pageContent" class="headerlink" title="pageContent"></a>pageContent</h2><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p>register.jsp<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="ruby">    pageEncoding=<span class="string">"UTF-8"</span></span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Insert title here<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"show.jsp"</span> &gt;</span></span></span><br><span class="line"><span class="xml">用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span> = <span class="string">"uname"</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">姓名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span> = <span class="string">"name"</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span> = <span class="string">"pwd"</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">爱好: <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">足球:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span> = <span class="string">"hobby"</span>  <span class="attr">value</span>=<span class="string">"足球"</span>/&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">篮球 :<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span> = <span class="string">"hobby"</span> <span class="attr">value</span>=<span class="string">"篮球"</span>/&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"注册"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="vbscript">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="vbscript">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Insert title here<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span><span class="vbscript">&lt;%</span></span><br><span class="line"><span class="vbscript"><span class="built_in">request</span>.setCharacterEncoding(<span class="string">"utf-8"</span>);//设置post 方式编码</span></span><br><span class="line"><span class="vbscript"><span class="built_in">String</span> name = <span class="built_in">request</span>.getParameter(<span class="string">"uname"</span>); </span></span><br><span class="line"><span class="vbscript"><span class="built_in">String</span> pwd = <span class="built_in">request</span>.getParameter(<span class="string">"pwd"</span>);</span></span><br><span class="line"><span class="vbscript"><span class="built_in">String</span>[] hobby = <span class="built_in">request</span>.getParameterValues(<span class="string">"hobby"</span>);</span></span><br><span class="line"><span class="vbscript">%&gt;</span><span class="xml"></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">注册成功,信息如下</span></span><br><span class="line"><span class="xml">姓名：</span><span class="vbscript">&lt;%=name %&gt;</span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">密码：</span><span class="vbscript">&lt;%=pwd %&gt;</span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">爱好：</span></span><br><span class="line"><span class="xml"></span><span class="vbscript">&lt;%</span></span><br><span class="line"><span class="vbscript"><span class="keyword">if</span>(hobby != <span class="literal">null</span>)&#123;</span></span><br><span class="line"><span class="vbscript"><span class="keyword">for</span>(<span class="built_in">String</span> i : hobby)&#123;</span></span><br><span class="line"><span class="vbscript">out.print(i);</span></span><br><span class="line"><span class="vbscript">&#125;</span></span><br><span class="line"><span class="vbscript">&#125;</span></span><br><span class="line"><span class="vbscript"></span></span><br><span class="line"><span class="vbscript"></span></span><br><span class="line"><span class="vbscript"></span></span><br><span class="line"><span class="vbscript">%&gt;</span><span class="xml"></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="/2018/09/23/javaweb/show.png" alt="show.jsp"></p><h2 id="get-和-post"><a href="#get-和-post" class="headerlink" title="get 和 post"></a>get 和 post</h2><p><a href="http://localhost:8888/JspProject/show.jsp?uname=sdf&amp;name=sdf&amp;pwd=sdf&amp;hobby=%E8%B6%B3%E7%90%83" target="_blank" rel="noopener">http://localhost:8888/JspProject/show.jsp?uname=sdf&amp;name=sdf&amp;pwd=sdf&amp;hobby=%E8%B6%B3%E7%90%83</a><br>get 提交方式 method=“get” 和 地址栏 请求方式默认都属于get提交方式，form 表带默认是get模式</p><h4 id="get-和-post-区别"><a href="#get-和-post-区别" class="headerlink" title="get 和 post 区别"></a>get 和 post 区别</h4><ol><li>get方式在地址栏显示请求信息，但是地址栏能够容纳信息有限，4-5kb，且不安全</li><li>文件上传方式必须是post</li><li>推荐使用post</li></ol><h2 id="乱码"><a href="#乱码" class="headerlink" title="乱码"></a>乱码</h2><p>a. 使用new String(name.getBytes(“ios-8859-1”),”utf-8”);</p><p>b. 修改server.xml 将tomcat 默认编码改为 utf -8 ，添加URIEncoding=”UTF-8”<br>如图：<br><img src="/2018/09/23/javaweb/修改tomcat默认编码.png" alt="修改编码"></p><h3 id="responds-响应对象"><a href="#responds-响应对象" class="headerlink" title="responds 响应对象"></a>responds 响应对象</h3><pre><code>提供的方法</code></pre><ol><li>addCookie (Cookie cookie) 服务端向客户端添加一条cookie</li><li>sendRedirect(String location) throws IOException 页面跳转打一种（重定向）</li><li>setContentType(String type) 设置服务端编码</li></ol><h2 id="页面跳转的两种方式"><a href="#页面跳转的两种方式" class="headerlink" title="页面跳转的两种方式"></a>页面跳转的两种方式</h2><table><thead><tr><th>&amp;nbps</th><th>请求转发</th><th>重定向</th></tr></thead><tbody><tr><td>地址栏是否改变</td><td>不变</td><td>改变</td></tr><tr><td>是否保留第一次请求时的数据</td><td>保留</td><td>不保留</td></tr><tr><td>请求的次数</td><td>1</td><td>2</td></tr><tr><td>跳转位置</td><td>服务端</td><td>客户端发出的第二次request</td></tr></tbody></table><h3 id="重定向和转发打两种工作方式"><a href="#重定向和转发打两种工作方式" class="headerlink" title="重定向和转发打两种工作方式"></a>重定向和转发打两种工作方式</h3><pre><code>转发（客户端） --&gt; [ 服务窗口 A(服务端) -&gt; 服务窗口B]// 服务器累不转发，实现页面跳转，所以请求1次，重定向 (客户端) --&gt;[服务窗口A] // A告诉客户端，让客户端发情球给B        客户端---&gt; 根据窗口A的回复，找B，于是客户端给B发request</code></pre><h1 id="session-服务端"><a href="#session-服务端" class="headerlink" title="session(服务端)"></a>session(服务端)</h1><h2 id="Cookie-客户端，不是内置对象-Cookie-是服务端生成的，再发给客户端保存。"><a href="#Cookie-客户端，不是内置对象-Cookie-是服务端生成的，再发给客户端保存。" class="headerlink" title="Cookie(客户端，不是内置对象): Cookie 是服务端生成的，再发给客户端保存。"></a>Cookie(客户端，不是内置对象): Cookie 是服务端生成的，再发给客户端保存。</h2><pre><code>相当于本能地访问作用 :提高访问服务器效率，但是安全性较差</code></pre><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cookie： key/<span class="keyword">name</span>=value</span><br><span class="line">javax.servlet.http.Cookie</span><br><span class="line"><span class="keyword">public</span> Cookie(<span class="keyword">String</span> <span class="keyword">name</span>,<span class="keyword">String</span> <span class="keyword">name</span>)</span><br><span class="line"><span class="keyword">String</span> getName() 获取<span class="keyword">name</span></span><br><span class="line"><span class="keyword">String</span> getValue() 获取value</span><br><span class="line">void setMaxAge(int expiry); 最大有效期</span><br></pre></td></tr></table></figure><h3 id="服务器准备发送给客户端"><a href="#服务器准备发送给客户端" class="headerlink" title="服务器准备发送给客户端"></a>服务器准备发送给客户端</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">response</span><span class="selector-class">.addCookie</span>(Cookie cookie);</span><br><span class="line">页面跳转 (转发，重定向)</span><br></pre></td></tr></table></figure><h3 id="客户端获取cookie"><a href="#客户端获取cookie" class="headerlink" title="客户端获取cookie:"></a>客户端获取cookie:</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">request</span><span class="selector-class">.getCookie</span>()</span><br></pre></td></tr></table></figure><pre><code>一次只能吧全部cookie全部获取</code></pre><h3 id="session-回话"><a href="#session-回话" class="headerlink" title="session : 回话"></a>session : 回话</h3><h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><ol><li>浏览网站，开始，关闭</li><li>购物浏览付款关闭</li></ol><h4 id="JESSIONID"><a href="#JESSIONID" class="headerlink" title="JESSIONID"></a>JESSIONID</h4><pre><code>JESSIONID 于sessionID 对应，用于区分用户客户端第一次访问服务器时，由服务断产生一个session回话，并将sessionid 给到jsessionid，通过cookie返回客户端</code></pre><h4 id="session-方法"><a href="#session-方法" class="headerlink" title="session 方法"></a>session 方法</h4><ol><li>getid 获取sessionid 编号</li><li>boolean isNew()判断是否新用户</li><li>void invalidate（）是session失效</li><li>setAttribute（）</li><li>getAttribute();</li><li>setMaxInactiveInterval(); 设置最大有效非活动时间</li><li>getMaxInactiveInterval(); 获取最大有效非活动时间</li></ol><h3 id="四种作用范围对象"><a href="#四种作用范围对象" class="headerlink" title="四种作用范围对象"></a>四种作用范围对象</h3><table><thead><tr><th>对象</th><th>中文名</th><th>作用范围</th></tr></thead><tbody><tr><td>pageContext</td><td>Jsp页面容器</td><td>当前页面有效</td></tr><tr><td>request</td><td>请求对象</td><td>同一次请求有效</td></tr><tr><td>session</td><td>会话对象</td><td>同一次会话有效</td></tr><tr><td>application</td><td>全局对象</td><td>全局有效</td></tr></tbody></table><h1 id="jDBC-java-database-connectivity"><a href="#jDBC-java-database-connectivity" class="headerlink" title="jDBC(java database connectivity)"></a>jDBC(java database connectivity)</h1><ol><li>JDBC API 提供各种操作访问的借口</li><li>JDBC DriverManager : 管理不同的数据库驱动</li><li>各种数据库驱动，相应的数据库厂商提供的，直接操作数据库</li></ol><h2 id="JDBC-主要功能"><a href="#JDBC-主要功能" class="headerlink" title="JDBC 主要功能"></a>JDBC 主要功能</h2><p>三件事。具体通过一下接口，类实现<br>DriverManager 管理jdbc 驱动<br>connection 连接<br>statement 增删改查<br>callableStatement 调用数据库中的存储过程和存储函数<br>result 返回结果集</p><h2 id="jdbc-访问数据库的具体步骤"><a href="#jdbc-访问数据库的具体步骤" class="headerlink" title="jdbc 访问数据库的具体步骤"></a>jdbc 访问数据库的具体步骤</h2><p>a. 导入驱动，加载具体驱动类<br>b. 与数据库建立链接<br>c. 发送sql 执行<br>d. 处理结果集</p><h2 id="数据库驱动"><a href="#数据库驱动" class="headerlink" title="数据库驱动"></a>数据库驱动</h2><table><thead><tr><th></th><th>驱动jar</th><th>具体的驱动类</th><th>链接字符串</th></tr></thead><tbody><tr><td>oracle</td><td>ojdbc-x.jar</td><td>oracle.jdbc.oracleDriver</td><td>jdbc:oracle:thin:@localhost:1521:ORCL</td></tr><tr><td>mysql</td><td>mysql-connector-java-x.jar</td><td>com.mysql.jdbc.Driver</td><td>jdbc:mysql://localhost:3306/数据库实例名</td></tr><tr><td>SqlServer</td><td>sqljdbc-x.jar</td><td>com.microsoft.sqlserver.jdbc.sqlserverdriver</td><td>jdbc:microsoft:sqlserver:localhost:1433;datebasename=实例名</td></tr></tbody></table><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">实现java 访问 mysql</span><br><span class="line">不会了，来看看</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> com.mysql.cj.jdbc.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">public</span> class jdbc &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> URL = <span class="string">"jdbc:mysql://localhost:3306/javaweb"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> USER = <span class="string">"zhong"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> PWD = <span class="string">"dyr520"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">void</span> update() &#123;</span><br><span class="line"><span class="comment">// 导入驱动，具体的类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 与数据库建立链接</span></span><br><span class="line"><span class="comment">//DriverManager.getConnection(URL);</span></span><br><span class="line">Connection connection = <span class="keyword">null</span>;</span><br><span class="line">Statement stmt = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">connection = DriverManager.getConnection(URL,USER,PWD);</span><br><span class="line">stmt = connection.createStatement();</span><br><span class="line"><span class="keyword">String</span> sql = <span class="string">"insert into firsttest(id) values(9)"</span>;</span><br><span class="line"><span class="comment">//String sql = "alter ";</span></span><br><span class="line"><span class="comment">//String sql = "delete";</span></span><br><span class="line"><span class="built_in">int</span> state = stmt.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span> (state &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="string">"success"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="string">"fail"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">stmt.close();</span><br><span class="line">connection.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> query() &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入驱动，具体的类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 与数据库建立链接</span></span><br><span class="line"><span class="comment">//DriverManager.getConnection(URL);</span></span><br><span class="line">Connection connection = <span class="keyword">null</span>;</span><br><span class="line">Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">connection = DriverManager.getConnection(URL,USER,PWD);</span><br><span class="line">stmt = connection.createStatement();</span><br><span class="line"><span class="keyword">String</span> sql = <span class="string">"select * from firsttest;"</span>;</span><br><span class="line">rs = stmt.executeQuery(sql);</span><br><span class="line"><span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line"><span class="built_in">int</span> snoid = rs.getInt(<span class="string">"id"</span>);</span><br><span class="line">System.out.<span class="built_in">println</span>(snoid);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">rs.close();</span><br><span class="line">stmt.close();</span><br><span class="line">connection.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> update2() &#123;</span><br><span class="line"><span class="comment">// 导入驱动，具体的类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 与数据库建立链接</span></span><br><span class="line"><span class="comment">//DriverManager.getConnection(URL);</span></span><br><span class="line">Connection connection = <span class="keyword">null</span>;</span><br><span class="line">PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">connection = DriverManager.getConnection(URL,USER,PWD);</span><br><span class="line"><span class="keyword">String</span> sql = <span class="string">"insert into firsttest(id) values(?)"</span>;</span><br><span class="line">pstmt = connection.prepareStatement(sql);</span><br><span class="line">pstmt.setInt(<span class="number">1</span>, <span class="number">8</span>);</span><br><span class="line">pstmt.executeUpdate();</span><br><span class="line"><span class="comment">//String sql = "alter ";</span></span><br><span class="line"><span class="comment">//String sql = "delete";</span></span><br><span class="line"><span class="built_in">int</span> state = pstmt.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span> (state &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="string">"success"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="string">"fail"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">pstmt.close();</span><br><span class="line">connection.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span> args[]) &#123;</span><br><span class="line"><span class="comment">//update();</span></span><br><span class="line">update2();</span><br><span class="line">query();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="推荐使用PreparedStatement"><a href="#推荐使用PreparedStatement" class="headerlink" title="推荐使用PreparedStatement"></a>推荐使用PreparedStatement</h3><h4 id="stmt"><a href="#stmt" class="headerlink" title="stmt"></a>stmt</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String sql = "<span class="keyword">insert</span> <span class="keyword">into</span> studen(<span class="keyword">id</span>,<span class="keyword">name</span>) <span class="keyword">values</span>(<span class="string">"+id+"</span>,<span class="string">'"+name+"'</span>)</span><br><span class="line">   stmt.executeUpdate(<span class="keyword">sql</span>);</span><br></pre></td></tr></table></figure><h4 id="OreparedStatement"><a href="#OreparedStatement" class="headerlink" title="OreparedStatement"></a>OreparedStatement</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String sql = <span class="string">"insert into student(id,name) values(?,?)"</span><span class="comment">;</span></span><br><span class="line">pstmt = connection.prepareStatement(sql)<span class="comment">;//预编译操作</span></span><br><span class="line">pstmt.setString(<span class="number">1</span>,name)<span class="comment">;</span></span><br><span class="line">pstmt.setInt(<span class="number">2</span>,age)<span class="comment">;</span></span><br><span class="line">pstmt.executeUpdate()<span class="comment">;</span></span><br></pre></td></tr></table></figure><h3 id="PreparedStatement-好处"><a href="#PreparedStatement-好处" class="headerlink" title="PreparedStatement 好处"></a>PreparedStatement 好处</h3><ol><li>方便</li><li>效率高</li><li>安全，可以防止sql注入</li></ol><h2 id="CallableStatement"><a href="#CallableStatement" class="headerlink" title="CallableStatement"></a>CallableStatement</h2><pre><code>调用 存储过程，存储函数connection.prepareCall(参数，存储过程或存储函数)</code></pre><h2 id="jdbc总结"><a href="#jdbc总结" class="headerlink" title="jdbc总结"></a>jdbc总结</h2><h2 id="加载具体的驱动类"><a href="#加载具体的驱动类" class="headerlink" title="加载具体的驱动类"></a>加载具体的驱动类</h2><pre><code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code></pre><h2 id="与数据库建立链接"><a href="#与数据库建立链接" class="headerlink" title="与数据库建立链接"></a>与数据库建立链接</h2><pre><code>connection = DriverManager.getConnection(URL,USER,PWD);</code></pre><h2 id="建立操作数据库对象"><a href="#建立操作数据库对象" class="headerlink" title="建立操作数据库对象"></a>建立操作数据库对象</h2><p>1.pstmt = connection.prepareStatement(sql);<br>2.stmt = connection.createStatement();</p><h2 id="若是查询，则处理结果集"><a href="#若是查询，则处理结果集" class="headerlink" title="若是查询，则处理结果集"></a>若是查询，则处理结果集</h2><h2 id="处理异常"><a href="#处理异常" class="headerlink" title="处理异常"></a>处理异常</h2><pre><code>jdbc中除了Class.ForName 抛出ClassNotFoundException，其他都是sqlException</code></pre><h2 id="处理CLOB-text-BLOG-类型-CLOB-为oracle类型，text为mysql类型"><a href="#处理CLOB-text-BLOG-类型-CLOB-为oracle类型，text为mysql类型" class="headerlink" title="处理CLOB[text]/BLOG 类型(CLOB 为oracle类型，text为mysql类型)"></a>处理CLOB[text]/BLOG 类型(CLOB 为oracle类型，text为mysql类型)</h2><p>处理稍大型数据<br>方法1.<br>    存储路径，然后通过IO处理<br>    例如，<br>方法2.<br>    直接存在数据库中<br>    CLOB:大文本数据 //setCharacterStream(2,new IputStreamReader(in));</p><p>#jsp 访问数据库</p><h2 id="导包"><a href="#导包" class="headerlink" title="导包"></a>导包</h2><pre><code>java项目复制到工程，然后右键build path ，点击web 讲jar复制到web-inf/lib 下 ok</code></pre><h1 id="javaBean"><a href="#javaBean" class="headerlink" title="javaBean"></a>javaBean</h1><h2 id="javaBean是一个java类的定义，满足以下两点可称为javaBean"><a href="#javaBean是一个java类的定义，满足以下两点可称为javaBean" class="headerlink" title="javaBean是一个java类的定义，满足以下两点可称为javaBean"></a>javaBean是一个java类的定义，满足以下两点可称为javaBean</h2><pre><code>a.public 修饰类，public 无参构造函数b.所有的属性都是private，并且提供set/get/isd</code></pre><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><pre><code>如果jsp出现错误 xxx type is not resolve 1.可能是jdk,tomcat 版本问题2.清空缓存，邮件项目，clean tomcat clean 或者project clean 进tomcat 目录，删除work3.将类写在包下</code></pre><h2 id="标准"><a href="#标准" class="headerlink" title="标准"></a>标准</h2><pre><code>如果类是访问数据库的类，则类名以dao结尾</code></pre><h1 id="MVC-设计模式"><a href="#MVC-设计模式" class="headerlink" title="MVC 设计模式"></a>MVC 设计模式</h1><h2 id="M-model-模型"><a href="#M-model-模型" class="headerlink" title="M (model)模型"></a>M (model)模型</h2><pre><code>例如 登录功能，增加学生功能，删除学生功能</code></pre><h2 id="V-view-视图"><a href="#V-view-视图" class="headerlink" title="V (view) 视图"></a>V (view) 视图</h2><pre><code>负责页面的显示，表单，表格html/css/jsp/jsp</code></pre><h2 id="C-controller-控制器"><a href="#C-controller-控制器" class="headerlink" title="C (controller) 控制器"></a>C (controller) 控制器</h2><pre><code>可以理解为分发器。接受各种请求，将请求分发到各个模型处理</code></pre><h2 id="Servlet-要想使用，必须配置"><a href="#Servlet-要想使用，必须配置" class="headerlink" title="Servlet 要想使用，必须配置"></a>Servlet 要想使用，必须配置</h2><pre><code>Serlvet2.5 web.xmlServlet3.0 @WebServlet</code></pre><h2 id="web的根目录-src，WebContent"><a href="#web的根目录-src，WebContent" class="headerlink" title="web的根目录 src，WebContent"></a>web的根目录 src，WebContent</h2><h2 id="servlet2-5-执行流程"><a href="#servlet2-5-执行流程" class="headerlink" title="servlet2.5  执行流程"></a>servlet2.5  执行流程</h2><pre><code>请求被url-pattern拦截，找到servlet-name对应servlet 中的servlet-class</code></pre><h2 id="servlet3-0-于2-5区别"><a href="#servlet3-0-于2-5区别" class="headerlink" title="servlet3.0 于2.5区别"></a>servlet3.0 于2.5区别</h2><pre><code>servlet3.0 不需要在web.xml 钟配置，但是需要在servlet中写@webservlet（/servlet-name）匹配流程，请求地址，于@webServlet钟的值进行匹配，如果匹配成功，则请求的就是该类servlet3.0 写参数</code></pre><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@WebServlet</span>(value=<span class="string">"/WelcomeServlet"</span>,loadOnStartup=<span class="number">1</span>,initParams=&#123;<span class="variable">@WebInitParam</span>(name=<span class="string">"servlet30"</span> value=<span class="string">"servlet30"</span>)&#125;)</span><br></pre></td></tr></table></figure><h1 id="servlet-生命周期"><a href="#servlet-生命周期" class="headerlink" title="servlet 生命周期"></a>servlet 生命周期</h1><pre><code>5个过程1. 加载2. 初始化init()该方法在servlet加载并实例化之后执行，第一次访问执行，并且，只执行一次3. 服务 service（） -&gt; doGet doPost()4. 销毁destroy() servlet 被系统回收时执行5. 卸载其中加载，卸载由Servlet容器自动处理</code></pre><h1 id="Servlet-API-由两个包组成，http包，和其他协议包"><a href="#Servlet-API-由两个包组成，http包，和其他协议包" class="headerlink" title="Servlet API  由两个包组成，http包，和其他协议包"></a>Servlet API  由两个包组成，http包，和其他协议包</h1><h2 id="SErvletConfig-接口"><a href="#SErvletConfig-接口" class="headerlink" title="SErvletConfig: 接口"></a>SErvletConfig: 接口</h2><h2 id="ServletContext-getServletConetext（）"><a href="#ServletContext-getServletConetext（）" class="headerlink" title="ServletContext getServletConetext（）"></a>ServletContext getServletConetext（）</h2><pre><code>获取servlet上下文对象 application</code></pre><h2 id="String-getInitParameter（String-name）"><a href="#String-getInitParameter（String-name）" class="headerlink" title="String getInitParameter（String name）"></a>String getInitParameter（String name）</h2><pre><code>当前Servlet范围获取 获取参数名为name的只</code></pre><h2 id="ServletContext中常见方法application"><a href="#ServletContext中常见方法application" class="headerlink" title="ServletContext中常见方法application"></a>ServletContext中常见方法application</h2><p>1.getContextPath()<br>2.getRealPath()<br>3.setAttribute getAttribute()</p><h2 id="String-getInitParameter（String-name）-1"><a href="#String-getInitParameter（String-name）-1" class="headerlink" title="String getInitParameter（String name）"></a>String getInitParameter（String name）</h2><pre><code>当前web范围获取 获取参数名为name的只</code></pre><h1 id="三层架构"><a href="#三层架构" class="headerlink" title="三层架构"></a>三层架构</h1><pre><code>于mvc设计模式目标一直，都是为了解耦合，提高代码复用区别，两者对项目的理解角度不同</code></pre><h1 id="三层组成"><a href="#三层组成" class="headerlink" title="三层组成"></a>三层组成</h1><p>表示层 （USL，user showlayer 视图层）<br>    前台 js，html， css ，jqeury<br>    后台 servlet<br>业务逻辑 BLL Bussiness logic layer service层）<br>数据访问层 （DAL data access layer dao层）</p><h1 id="三层优化"><a href="#三层优化" class="headerlink" title="三层优化"></a>三层优化</h1><p>1.加入接口<br>    建议面向接口开发,先接口然后是实现类</p><pre><code>--service dao加入接口</code></pre><table><thead><tr><th></th><th>起名</th></tr></thead><tbody><tr><td>接口interface</td><td>I实体类Service/IStudentDao</td></tr><tr><td>实体类implements</td><td>实体类 ServiceImpl StudentDaoImpl</td></tr></tbody></table><p>2.DBUtil</p><h1 id="SQL-分页"><a href="#SQL-分页" class="headerlink" title="SQL 分页"></a>SQL 分页</h1><h2 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h2><pre><code>要实现分页，必须知道，某一页的数据从哪里开始，到哪里结束</code></pre><h1 id="mysql-实现分页的sql"><a href="#mysql-实现分页的sql" class="headerlink" title="mysql 实现分页的sql"></a>mysql 实现分页的sql</h1><p>limit 开始，多少条 （mysql 从0 开始计数，oracle，SQlserver是1）<br>select * from student limit 0,10 [0 - 9 条数据]</p><h2 id="分页的实现"><a href="#分页的实现" class="headerlink" title="分页的实现"></a>分页的实现</h2><h3 id="5-个变量（属性）"><a href="#5-个变量（属性）" class="headerlink" title="5 个变量（属性）"></a>5 个变量（属性）</h3><p>1.数据的总数 查数据库 select count（×） 。。。<br>2.页面大小 （用户自定义）<br>3.总页数    （程序计算）<br>4.当前页（页码） （用户自定义<br>5.当前也的对象集合（实体集合） ，每页显示所有的数据</p><h1 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h1><h2 id="a-引入2个jar"><a href="#a-引入2个jar" class="headerlink" title="a. 引入2个jar"></a>a. 引入2个jar</h2><pre><code>apache： commons-fileupload.jar commons-fileupload.jar 依赖 commons-io.jar</code></pre><h2 id="b-代码"><a href="#b-代码" class="headerlink" title="b.代码"></a>b.代码</h2><p>前台jsp<br>    <input type="file" name="picture"><br>    表单提交方式为post<br>    在表单中必须添加一个属性 entype= “multipart/form-data”</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;html&quot;&gt;&lt;a href=&quot;#html&quot; class=&quot;headerlink&quot; title=&quot;html&quot;&gt;&lt;/a&gt;html&lt;/h1&gt;&lt;h2 id=&quot;表单&quot;&gt;&lt;a href=&quot;#表单&quot; class=&quot;headerlink&quot; title=&quot;表单&quot;&gt;&lt;/a&gt;&lt;form
      
    
    </summary>
    
      <category term="javaweb" scheme="http://yoursite.com/categories/javaweb/"/>
    
    
      <category term="javaweb" scheme="http://yoursite.com/tags/javaweb/"/>
    
  </entry>
  
  <entry>
    <title>javaweb</title>
    <link href="http://yoursite.com/2018/09/23/java/"/>
    <id>http://yoursite.com/2018/09/23/java/</id>
    <published>2018-09-23T09:48:27.000Z</published>
    <updated>2018-10-04T03:34:29.483Z</updated>
    
    <content type="html"><![CDATA[<h1 id="常见的网络状态"><a href="#常见的网络状态" class="headerlink" title="常见的网络状态"></a>常见的网络状态</h1><p>200: 一切正常<br>300/301： 页面重定向/跳转<br>404：资源不存在<br>403：权限不足<br>500：服务器内部错误，（代码有错）</p><h1 id="jsp-定义"><a href="#jsp-定义" class="headerlink" title="jsp 定义"></a>jsp 定义</h1><pre><code>jsp: html 嵌入java代码&lt;% java 代码%&gt;</code></pre><h1 id="默认index"><a href="#默认index" class="headerlink" title="默认index"></a>默认index</h1><pre><code>在/WEB_INF/web.xml中设置默认打index</code></pre><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;welcome-<span class="built_in">file</span>-<span class="built_in">list</span>&gt;</span><br><span class="line">&lt;welcome-<span class="built_in">file</span>&gt;index.jsp&lt;/welcome-<span class="built_in">file</span>&gt;</span><br><span class="line">&lt;/welcome-<span class="built_in">file</span>-<span class="built_in">list</span>&gt;</span><br></pre></td></tr></table></figure><h1 id="虚拟路径"><a href="#虚拟路径" class="headerlink" title="虚拟路径"></a>虚拟路径</h1><pre><code>将web项目放在webapps之外打地方  在server.html 中&lt;Engine&gt;下的&lt;host&gt;钟添加&lt;Context&gt;</code></pre><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">方式 1</span><br><span class="line">&lt;Context <span class="attribute">docBase</span>=<span class="string">""</span> <span class="attribute">path</span>=<span class="string">""</span>&gt;</span><br><span class="line">docBase: 实际路径</span><br><span class="line">path： 虚拟路径（绝对路径或相对路径（相对webapps））</span><br><span class="line">&lt;Context <span class="attribute">docBase</span>=<span class="string">"PATH"</span> <span class="attribute">path</span>=<span class="string">"/JspProject"</span>&gt;</span><br><span class="line">访问webapps下打JspProject 相当于访问PATH</span><br><span class="line"></span><br><span class="line">方式 2</span><br><span class="line">在catalin中的localhost钟新建 项目名.xml</span><br><span class="line">打开 .xml 文件添加</span><br><span class="line">&lt;Context <span class="attribute">docBase</span>=<span class="string">"PATH"</span> <span class="attribute">path</span>=<span class="string">"/JspProject"</span>&gt;</span><br></pre></td></tr></table></figure><h1 id="虚拟主机"><a href="#虚拟主机" class="headerlink" title="虚拟主机"></a>虚拟主机</h1><pre><code>例子，通过www.test.com 访问本机a. 在conf/server.xml下，添加Host</code></pre><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Host appBase=<span class="string">"实际项目路径"</span> name=<span class="string">"www.test.com"</span>&gt;</span><br><span class="line">&lt;context docBase=<span class="string">"实际项目名"</span> path=<span class="string">"/"</span> /&gt;</span><br><span class="line">&lt;/Host&gt;</span><br><span class="line"><span class="selector-tag">b</span>.修改Engine 的dufaultHost 为 www<span class="selector-class">.test</span><span class="selector-class">.com</span></span><br><span class="line">    c.修改本地域名解析，hosts文件</span><br><span class="line">    （ubuntu 下的/etc/hosts,windows 下 C:\windows\System32\drivers\etc\host）</span><br></pre></td></tr></table></figure><pre><code>以上虚拟路径和虚拟主机不常用</code></pre><h1 id="Jsp执行流程"><a href="#Jsp执行流程" class="headerlink" title="Jsp执行流程"></a>Jsp执行流程</h1><pre><code>第一次访问，服务端将jsp翻译成java，再讲java编译成class文件</code></pre><h1 id="Eclipse-安装"><a href="#Eclipse-安装" class="headerlink" title="Eclipse 安装"></a>Eclipse 安装</h1><pre><code>说在前面Eclipse 安装首先配置jdk，jdk版本一定要与eclipse版本适配(曾经，用32位jdk配置64位eclipse，被坑了一上午)</code></pre><h2 id="jdk-安装"><a href="#jdk-安装" class="headerlink" title="jdk 安装"></a>jdk 安装</h2><pre><code>下载jdk，解压到目录，然后添加环境变量我直接添加在/etc/profile</code></pre><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/lib/jvm/jdk1.8.0_181</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JRE_HOME</span>=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">CLASSPATH</span>=.:$&#123;JAVA_HOME&#125;/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=.:$&#123;JAVA_HOME&#125;/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p><a href="https://www.oracle.com/technetwork/cn/java/javase/downloads/jdk8-downloads-2133151-zhs.html" target="_blank" rel="noopener">jdk 地址</a><br><a href="https://www.eclipse.org/downloads/download.php?file=/oomph/epp/2018-09/R/eclipse-inst-linux64.tar.gz&amp;mirror_id=1093" target="_blank" rel="noopener">eclipse</a></p><h2 id="Eclipse-安装-1"><a href="#Eclipse-安装-1" class="headerlink" title="Eclipse 安装"></a>Eclipse 安装</h2><pre><code>配置玩jdk之后，下载Eclipse解压，然后运行./eclipse_inst 然后无脑操作</code></pre><h2 id="tomcat配置关联"><a href="#tomcat配置关联" class="headerlink" title="tomcat配置关联"></a>tomcat配置关联</h2><pre><code>首先在windows 下的preference钟找到runtime Environment 钟添加Apache Tomcat,我这边悬着tomcat 8.5然后在servers中配置tomcat，同样是tomcat8.5然后新建一个other/dynamic web project 项目</code></pre><h1 id="Jsp-的页面元素"><a href="#Jsp-的页面元素" class="headerlink" title="Jsp 的页面元素"></a>Jsp 的页面元素</h1><h2 id="scriptlet"><a href="#scriptlet" class="headerlink" title="scriptlet"></a>scriptlet</h2><ol><li>&lt;% 局部变量 java语句%&gt;</li><li>&lt;%!全局变量 定义方法% &gt;<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">!</span></span><br><span class="line"><span class="ruby">public String BookName;<span class="regexp">//</span>全局变量</span></span><br><span class="line"><span class="ruby">public void init()&#123;</span></span><br><span class="line"><span class="ruby">BookName = <span class="string">"java book"</span>;</span></span><br><span class="line"><span class="ruby">&#125;</span></span><br><span class="line"><span class="ruby"></span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> </span></span><br><span class="line"><span class="ruby">String name = <span class="string">"zhangsan"</span>;<span class="regexp">//</span>局部变量</span></span><br><span class="line"><span class="ruby">out.print(<span class="string">"hello..."</span>+name );</span></span><br><span class="line"><span class="ruby">init();</span></span><br><span class="line"><span class="ruby"></span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby">BookName </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--一般而言，修改web.xml,配置文件，java代码，需要重启tomcat服务--&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="comment">&lt;!--修改jsp，css，html,js不需要--&gt;</span></span></span><br></pre></td></tr></table></figure></li></ol><h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><h3 id="page指令"><a href="#page指令" class="headerlink" title="page指令"></a>page指令</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">网页开头</span><br><span class="line">&lt;%@<span class="built_in"> page </span><span class="attribute">language</span>=<span class="string">"java"</span> <span class="attribute">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    <span class="attribute">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span><br></pre></td></tr></table></figure><pre><code>page指定属性</code></pre><ol><li>language : jsp 页面使用打脚本语言</li><li>import 导入类</li><li>pageEncoding:jsp 自生编码</li><li>contentType： 浏览器解析jsp编码</li></ol><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><ol><li>html 注释<!----></li><li>java 注释// /**/</li><li>jsp注释 &lt;%– –%&gt;</li></ol><p>##jsp 九大内置对象</p><h2 id="out"><a href="#out" class="headerlink" title="out"></a>out</h2><pre><code>向客户端输出内容</code></pre><h2 id="request"><a href="#request" class="headerlink" title="request"></a>request</h2><pre><code>请求对象，存储客户端向服务端发送打请求信息常见方法: </code></pre><ol><li>String getParameter(String name);根据请求打字段名key，返回字段值value</li><li>String[] getParameterValues(String name); 根据请求打字段名key 返回多个字段value</li><li>void setCharacterEncoding（“编码格式utf-8”）设置请求编码(tomcat7以前默认编码ios-8859-1，tomcat8以后默认编码utf-8）</li><li>getRequestDispatcher().forward();请求转发的方式跳转页面 A-&gt;B</li><li>getServerContext() 或请项目的ServletContext对象</li></ol><h2 id="pageContent"><a href="#pageContent" class="headerlink" title="pageContent"></a>pageContent</h2><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p>register.jsp<br><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="ruby">    pageEncoding=<span class="string">"UTF-8"</span></span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Insert title here<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"show.jsp"</span> &gt;</span></span></span><br><span class="line"><span class="xml">用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span> = <span class="string">"uname"</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">姓名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span> = <span class="string">"name"</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span> = <span class="string">"pwd"</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">爱好: <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">足球:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span> = <span class="string">"hobby"</span>  <span class="attr">value</span>=<span class="string">"足球"</span>/&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">篮球 :<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span> = <span class="string">"hobby"</span> <span class="attr">value</span>=<span class="string">"篮球"</span>/&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"注册"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="vbscript">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="vbscript">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE html&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Insert title here<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span><span class="vbscript">&lt;%</span></span><br><span class="line"><span class="vbscript"><span class="built_in">request</span>.setCharacterEncoding(<span class="string">"utf-8"</span>);//设置post 方式编码</span></span><br><span class="line"><span class="vbscript"><span class="built_in">String</span> name = <span class="built_in">request</span>.getParameter(<span class="string">"uname"</span>); </span></span><br><span class="line"><span class="vbscript"><span class="built_in">String</span> pwd = <span class="built_in">request</span>.getParameter(<span class="string">"pwd"</span>);</span></span><br><span class="line"><span class="vbscript"><span class="built_in">String</span>[] hobby = <span class="built_in">request</span>.getParameterValues(<span class="string">"hobby"</span>);</span></span><br><span class="line"><span class="vbscript">%&gt;</span><span class="xml"></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">注册成功,信息如下</span></span><br><span class="line"><span class="xml">姓名：</span><span class="vbscript">&lt;%=name %&gt;</span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">密码：</span><span class="vbscript">&lt;%=pwd %&gt;</span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">爱好：</span></span><br><span class="line"><span class="xml"></span><span class="vbscript">&lt;%</span></span><br><span class="line"><span class="vbscript"><span class="keyword">if</span>(hobby != <span class="literal">null</span>)&#123;</span></span><br><span class="line"><span class="vbscript"><span class="keyword">for</span>(<span class="built_in">String</span> i : hobby)&#123;</span></span><br><span class="line"><span class="vbscript">out.print(i);</span></span><br><span class="line"><span class="vbscript">&#125;</span></span><br><span class="line"><span class="vbscript">&#125;</span></span><br><span class="line"><span class="vbscript"></span></span><br><span class="line"><span class="vbscript"></span></span><br><span class="line"><span class="vbscript"></span></span><br><span class="line"><span class="vbscript">%&gt;</span><span class="xml"></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="/2018/09/23/java/javaweb/show.png" alt="show.jsp"></p><h2 id="get-和-post"><a href="#get-和-post" class="headerlink" title="get 和 post"></a>get 和 post</h2><p><a href="http://localhost:8888/JspProject/show.jsp?uname=sdf&amp;name=sdf&amp;pwd=sdf&amp;hobby=%E8%B6%B3%E7%90%83" target="_blank" rel="noopener">http://localhost:8888/JspProject/show.jsp?uname=sdf&amp;name=sdf&amp;pwd=sdf&amp;hobby=%E8%B6%B3%E7%90%83</a><br>get 提交方式 method=“get” 和 地址栏 请求方式默认都属于get提交方式，form 表带默认是get模式</p><h4 id="get-和-post-区别"><a href="#get-和-post-区别" class="headerlink" title="get 和 post 区别"></a>get 和 post 区别</h4><ol><li>get方式在地址栏显示请求信息，但是地址栏能够容纳信息有限，4-5kb，且不安全</li><li>文件上传方式必须是post</li><li>推荐使用post</li></ol><h2 id="乱码"><a href="#乱码" class="headerlink" title="乱码"></a>乱码</h2><p>a. 使用new String(name.getBytes(“ios-8859-1”),”utf-8”);</p><p>b. 修改server.xml 将tomcat 默认编码改为 utf -8 ，添加URIEncoding=”UTF-8”<br>如图：<br><img src="/2018/09/23/java/javaweb/修改tomcat默认编码.png" alt="修改编码"></p><h3 id="responds-响应对象"><a href="#responds-响应对象" class="headerlink" title="responds 响应对象"></a>responds 响应对象</h3><pre><code>提供的方法</code></pre><ol><li>addCookie (Cookie cookie) 服务端向客户端添加一条cookie</li><li>sendRedirect(String location) throws IOException 页面跳转打一种（重定向）</li><li>setContentType(String type) 设置服务端编码</li></ol><h2 id="页面跳转的两种方式"><a href="#页面跳转的两种方式" class="headerlink" title="页面跳转的两种方式"></a>页面跳转的两种方式</h2><table><thead><tr><th>&amp;nbps</th><th>请求转发</th><th>重定向</th></tr></thead><tbody><tr><td>地址栏是否改变</td><td>不变</td><td>改变</td></tr><tr><td>是否保留第一次请求时的数据</td><td>保留</td><td>不保留</td></tr><tr><td>请求的次数</td><td>1</td><td>2</td></tr><tr><td>跳转位置</td><td>服务端</td><td>客户端发出的第二次request</td></tr></tbody></table><h3 id="重定向和转发打两种工作方式"><a href="#重定向和转发打两种工作方式" class="headerlink" title="重定向和转发打两种工作方式"></a>重定向和转发打两种工作方式</h3><pre><code>转发（客户端） --&gt; [ 服务窗口 A(服务端) -&gt; 服务窗口B]// 服务器累不转发，实现页面跳转，所以请求1次，重定向 (客户端) --&gt;[服务窗口A] // A告诉客户端，让客户端发情球给B        客户端---&gt; 根据窗口A的回复，找B，于是客户端给B发request</code></pre><h1 id="session-服务端"><a href="#session-服务端" class="headerlink" title="session(服务端)"></a>session(服务端)</h1><h2 id="Cookie-客户端，不是内置对象-Cookie-是服务端生成的，再发给客户端保存。"><a href="#Cookie-客户端，不是内置对象-Cookie-是服务端生成的，再发给客户端保存。" class="headerlink" title="Cookie(客户端，不是内置对象): Cookie 是服务端生成的，再发给客户端保存。"></a>Cookie(客户端，不是内置对象): Cookie 是服务端生成的，再发给客户端保存。</h2><pre><code>相当于本能地访问作用 :提高访问服务器效率，但是安全性较差</code></pre><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cookie： key/<span class="keyword">name</span>=value</span><br><span class="line">javax.servlet.http.Cookie</span><br><span class="line"><span class="keyword">public</span> Cookie(<span class="keyword">String</span> <span class="keyword">name</span>,<span class="keyword">String</span> <span class="keyword">name</span>)</span><br><span class="line"><span class="keyword">String</span> getName() 获取<span class="keyword">name</span></span><br><span class="line"><span class="keyword">String</span> getValue() 获取value</span><br><span class="line">void setMaxAge(int expiry); 最大有效期</span><br></pre></td></tr></table></figure><h3 id="服务器准备发送给客户端"><a href="#服务器准备发送给客户端" class="headerlink" title="服务器准备发送给客户端"></a>服务器准备发送给客户端</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">response</span><span class="selector-class">.addCookie</span>(Cookie cookie);</span><br><span class="line">页面跳转 (转发，重定向)</span><br></pre></td></tr></table></figure><h3 id="客户端获取cookie"><a href="#客户端获取cookie" class="headerlink" title="客户端获取cookie:"></a>客户端获取cookie:</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">request</span><span class="selector-class">.getCookie</span>()</span><br></pre></td></tr></table></figure><pre><code>一次只能吧全部cookie全部获取</code></pre><h3 id="session-回话"><a href="#session-回话" class="headerlink" title="session : 回话"></a>session : 回话</h3><h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><ol><li>浏览网站，开始，关闭</li><li>购物浏览付款关闭</li></ol><h4 id="JESSIONID"><a href="#JESSIONID" class="headerlink" title="JESSIONID"></a>JESSIONID</h4><pre><code>JESSIONID 于sessionID 对应，用于区分用户客户端第一次访问服务器时，由服务断产生一个session回话，并将sessionid 给到jsessionid，通过cookie返回客户端</code></pre><h4 id="session-方法"><a href="#session-方法" class="headerlink" title="session 方法"></a>session 方法</h4><ol><li>getid 获取sessionid 编号</li><li>boolean isNew()判断是否新用户</li><li>void invalidate（）是session失效</li><li>setAttribute（）</li><li>getAttribute();</li><li>setMaxInactiveInterval(); 设置最大有效非活动时间</li><li>getMaxInactiveInterval(); 获取最大有效非活动时间</li></ol><h3 id="四种作用范围对象"><a href="#四种作用范围对象" class="headerlink" title="四种作用范围对象"></a>四种作用范围对象</h3><table><thead><tr><th>对象</th><th>中文名</th><th>作用范围</th></tr></thead><tbody><tr><td>pageContext</td><td>Jsp页面容器</td><td>当前页面有效</td></tr><tr><td>request</td><td>请求对象</td><td>同一次请求有效</td></tr><tr><td>session</td><td>会话对象</td><td>同一次会话有效</td></tr><tr><td>application</td><td>全局对象</td><td>全局有效</td></tr></tbody></table><h1 id="jDBC-java-database-connectivity"><a href="#jDBC-java-database-connectivity" class="headerlink" title="jDBC(java database connectivity)"></a>jDBC(java database connectivity)</h1><ol><li>JDBC API 提供各种操作访问的借口</li><li>JDBC DriverManager : 管理不同的数据库驱动</li><li>各种数据库驱动，相应的数据库厂商提供的，直接操作数据库</li></ol><h2 id="JDBC-主要功能"><a href="#JDBC-主要功能" class="headerlink" title="JDBC 主要功能"></a>JDBC 主要功能</h2><p>三件事。具体通过一下接口，类实现<br>DriverManager 管理jdbc 驱动<br>connection 连接<br>statement 增删改查<br>callableStatement 调用数据库中的存储过程和存储函数<br>result 返回结果集</p><h2 id="jdbc-访问数据库的具体步骤"><a href="#jdbc-访问数据库的具体步骤" class="headerlink" title="jdbc 访问数据库的具体步骤"></a>jdbc 访问数据库的具体步骤</h2><p>a. 导入驱动，加载具体驱动类<br>b. 与数据库建立链接<br>c. 发送sql 执行<br>d. 处理结果集</p><h2 id="数据库驱动"><a href="#数据库驱动" class="headerlink" title="数据库驱动"></a>数据库驱动</h2><table><thead><tr><th></th><th>驱动jar</th><th>具体的驱动类</th><th>链接字符串</th></tr></thead><tbody><tr><td>oracle</td><td>ojdbc-x.jar</td><td>oracle.jdbc.oracleDriver</td><td>jdbc:oracle:thin:@localhost:1521:ORCL</td></tr><tr><td>mysql</td><td>mysql-connector-java-x.jar</td><td>com.mysql.jdbc.Driver</td><td>jdbc:mysql://localhost:3306/数据库实例名</td></tr><tr><td>SqlServer</td><td>sqljdbc-x.jar</td><td>com.microsoft.sqlserver.jdbc.sqlserverdriver</td><td>jdbc:microsoft:sqlserver:localhost:1433;datebasename=实例名</td></tr></tbody></table><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">实现java 访问 mysql</span><br><span class="line">不会了，来看看</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> com.mysql.cj.jdbc.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">public</span> class jdbc &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> URL = <span class="string">"jdbc:mysql://localhost:3306/javaweb"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> USER = <span class="string">"zhong"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> PWD = <span class="string">"dyr520"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">void</span> update() &#123;</span><br><span class="line"><span class="comment">// 导入驱动，具体的类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 与数据库建立链接</span></span><br><span class="line"><span class="comment">//DriverManager.getConnection(URL);</span></span><br><span class="line">Connection connection = <span class="keyword">null</span>;</span><br><span class="line">Statement stmt = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">connection = DriverManager.getConnection(URL,USER,PWD);</span><br><span class="line">stmt = connection.createStatement();</span><br><span class="line"><span class="keyword">String</span> sql = <span class="string">"insert into firsttest(id) values(9)"</span>;</span><br><span class="line"><span class="comment">//String sql = "alter ";</span></span><br><span class="line"><span class="comment">//String sql = "delete";</span></span><br><span class="line"><span class="built_in">int</span> state = stmt.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span> (state &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="string">"success"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="string">"fail"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">stmt.close();</span><br><span class="line">connection.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> query() &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入驱动，具体的类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 与数据库建立链接</span></span><br><span class="line"><span class="comment">//DriverManager.getConnection(URL);</span></span><br><span class="line">Connection connection = <span class="keyword">null</span>;</span><br><span class="line">Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">connection = DriverManager.getConnection(URL,USER,PWD);</span><br><span class="line">stmt = connection.createStatement();</span><br><span class="line"><span class="keyword">String</span> sql = <span class="string">"select * from firsttest;"</span>;</span><br><span class="line">rs = stmt.executeQuery(sql);</span><br><span class="line"><span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line"><span class="built_in">int</span> snoid = rs.getInt(<span class="string">"id"</span>);</span><br><span class="line">System.out.<span class="built_in">println</span>(snoid);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">rs.close();</span><br><span class="line">stmt.close();</span><br><span class="line">connection.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> update2() &#123;</span><br><span class="line"><span class="comment">// 导入驱动，具体的类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 与数据库建立链接</span></span><br><span class="line"><span class="comment">//DriverManager.getConnection(URL);</span></span><br><span class="line">Connection connection = <span class="keyword">null</span>;</span><br><span class="line">PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">connection = DriverManager.getConnection(URL,USER,PWD);</span><br><span class="line"><span class="keyword">String</span> sql = <span class="string">"insert into firsttest(id) values(?)"</span>;</span><br><span class="line">pstmt = connection.prepareStatement(sql);</span><br><span class="line">pstmt.setInt(<span class="number">1</span>, <span class="number">8</span>);</span><br><span class="line">pstmt.executeUpdate();</span><br><span class="line"><span class="comment">//String sql = "alter ";</span></span><br><span class="line"><span class="comment">//String sql = "delete";</span></span><br><span class="line"><span class="built_in">int</span> state = pstmt.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span> (state &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="string">"success"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="string">"fail"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">pstmt.close();</span><br><span class="line">connection.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span> args[]) &#123;</span><br><span class="line"><span class="comment">//update();</span></span><br><span class="line">update2();</span><br><span class="line">query();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="推荐使用PreparedStatement"><a href="#推荐使用PreparedStatement" class="headerlink" title="推荐使用PreparedStatement"></a>推荐使用PreparedStatement</h3><h4 id="stmt"><a href="#stmt" class="headerlink" title="stmt"></a>stmt</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String sql = "<span class="keyword">insert</span> <span class="keyword">into</span> studen(<span class="keyword">id</span>,<span class="keyword">name</span>) <span class="keyword">values</span>(<span class="string">"+id+"</span>,<span class="string">'"+name+"'</span>)</span><br><span class="line">   stmt.executeUpdate(<span class="keyword">sql</span>);</span><br></pre></td></tr></table></figure><h4 id="OreparedStatement"><a href="#OreparedStatement" class="headerlink" title="OreparedStatement"></a>OreparedStatement</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String sql = <span class="string">"insert into student(id,name) values(?,?)"</span><span class="comment">;</span></span><br><span class="line">pstmt = connection.prepareStatement(sql)<span class="comment">;//预编译操作</span></span><br><span class="line">pstmt.setString(<span class="number">1</span>,name)<span class="comment">;</span></span><br><span class="line">pstmt.setInt(<span class="number">2</span>,age)<span class="comment">;</span></span><br><span class="line">pstmt.executeUpdate()<span class="comment">;</span></span><br></pre></td></tr></table></figure><h3 id="PreparedStatement-好处"><a href="#PreparedStatement-好处" class="headerlink" title="PreparedStatement 好处"></a>PreparedStatement 好处</h3><ol><li>方便</li><li>效率高</li><li>安全，可以防止sql注入</li></ol><h2 id="CallableStatement"><a href="#CallableStatement" class="headerlink" title="CallableStatement"></a>CallableStatement</h2><pre><code>调用 存储过程，存储函数connection.prepareCall(参数，存储过程或存储函数)</code></pre><h2 id="jdbc总结"><a href="#jdbc总结" class="headerlink" title="jdbc总结"></a>jdbc总结</h2><h2 id="加载具体的驱动类"><a href="#加载具体的驱动类" class="headerlink" title="加载具体的驱动类"></a>加载具体的驱动类</h2><pre><code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code></pre><h2 id="与数据库建立链接"><a href="#与数据库建立链接" class="headerlink" title="与数据库建立链接"></a>与数据库建立链接</h2><pre><code>connection = DriverManager.getConnection(URL,USER,PWD);</code></pre><h2 id="建立操作数据库对象"><a href="#建立操作数据库对象" class="headerlink" title="建立操作数据库对象"></a>建立操作数据库对象</h2><p>1.pstmt = connection.prepareStatement(sql);<br>2.stmt = connection.createStatement();</p><h2 id="若是查询，则处理结果集"><a href="#若是查询，则处理结果集" class="headerlink" title="若是查询，则处理结果集"></a>若是查询，则处理结果集</h2><h2 id="处理异常"><a href="#处理异常" class="headerlink" title="处理异常"></a>处理异常</h2><pre><code>jdbc中除了Class.ForName 抛出ClassNotFoundException，其他都是sqlException</code></pre><h2 id="处理CLOB-text-BLOG-类型-CLOB-为oracle类型，text为mysql类型"><a href="#处理CLOB-text-BLOG-类型-CLOB-为oracle类型，text为mysql类型" class="headerlink" title="处理CLOB[text]/BLOG 类型(CLOB 为oracle类型，text为mysql类型)"></a>处理CLOB[text]/BLOG 类型(CLOB 为oracle类型，text为mysql类型)</h2><p>处理稍大型数据<br>方法1.<br>    存储路径，然后通过IO处理<br>    例如，<br>方法2.<br>    直接存在数据库中<br>    CLOB:大文本数据 //setCharacterStream(2,new IputStreamReader(in));</p><p>#jsp 访问数据库</p><h2 id="导包"><a href="#导包" class="headerlink" title="导包"></a>导包</h2><pre><code>java项目复制到工程，然后右键build path ，点击web 讲jar复制到web-inf/lib 下 ok</code></pre><h1 id="javaBean"><a href="#javaBean" class="headerlink" title="javaBean"></a>javaBean</h1><h2 id="javaBean是一个java类的定义，满足以下两点可称为javaBean"><a href="#javaBean是一个java类的定义，满足以下两点可称为javaBean" class="headerlink" title="javaBean是一个java类的定义，满足以下两点可称为javaBean"></a>javaBean是一个java类的定义，满足以下两点可称为javaBean</h2><pre><code>a.public 修饰类，public 无参构造函数b.所有的属性都死private，并且提供set/get/isd</code></pre><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><pre><code>如果jsp出现错误 xxx type is not resolve 1.可能是jdk,tomcat 版本问题2.清空缓存，邮件项目，clean tomcat clean 或者project clean 进tomcat 目录，删除work3.将类写在包下</code></pre><h2 id="标准"><a href="#标准" class="headerlink" title="标准"></a>标准</h2><pre><code>如果类是访问数据库的类，则类名以dao结尾</code></pre><h1 id="MVC-设计模式"><a href="#MVC-设计模式" class="headerlink" title="MVC 设计模式"></a>MVC 设计模式</h1><h2 id="M-model-模型"><a href="#M-model-模型" class="headerlink" title="M (model)模型"></a>M (model)模型</h2><pre><code>例如 登录功能，增加学生功能，删除学生功能</code></pre><h2 id="V-view-视图"><a href="#V-view-视图" class="headerlink" title="V (view) 视图"></a>V (view) 视图</h2><pre><code>负责页面的显示，表单，表格html/css/jsp/jsp</code></pre><h2 id="C-controller-控制器"><a href="#C-controller-控制器" class="headerlink" title="C (controller) 控制器"></a>C (controller) 控制器</h2><pre><code>可以理解为分发器。接受各种请求，将请求分发到各个模型处理</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;常见的网络状态&quot;&gt;&lt;a href=&quot;#常见的网络状态&quot; class=&quot;headerlink&quot; title=&quot;常见的网络状态&quot;&gt;&lt;/a&gt;常见的网络状态&lt;/h1&gt;&lt;p&gt;200: 一切正常&lt;br&gt;300/301： 页面重定向/跳转&lt;br&gt;404：资源不存在&lt;br&gt;403
      
    
    </summary>
    
      <category term="javaweb" scheme="http://yoursite.com/categories/javaweb/"/>
    
    
      <category term="javaweb" scheme="http://yoursite.com/tags/javaweb/"/>
    
  </entry>
  
  <entry>
    <title>realcodespider</title>
    <link href="http://yoursite.com/2018/08/25/realcodespider/"/>
    <id>http://yoursite.com/2018/08/25/realcodespider/</id>
    <published>2018-08-25T11:55:36.000Z</published>
    <updated>2018-08-25T11:57:45.922Z</updated>
    
    <content type="html"><![CDATA[<h1 id="尝试爬去qmx网站钟俊威的总结"><a href="#尝试爬去qmx网站钟俊威的总结" class="headerlink" title="尝试爬去qmx网站钟俊威的总结"></a>尝试爬去qmx网站钟俊威的总结</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Spider</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deals</span> <span class="params">(self, html)</span>:</span></span><br><span class="line"></span><br><span class="line">        soup = BeautifulSoup(html,<span class="string">'html.parser'</span>);</span><br><span class="line">        <span class="comment">#print (soup.a.select('.aw-user-name'))</span></span><br><span class="line">        <span class="keyword">print</span> (soup.prettify());</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> soup.find_all(<span class="string">'div'</span>,class_ = <span class="string">"mod-head"</span>):</span><br><span class="line">            <span class="keyword">try</span> :</span><br><span class="line">                <span class="keyword">if</span> i.div.p.a.get_text() == <span class="string">"钟俊威"</span>:</span><br><span class="line">                    print(i.div.p.a.get_text() + i.find_next_sibling().div.get_text())</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">load</span><span class="params">(self, url)</span>:</span></span><br><span class="line">        print(url);</span><br><span class="line">        headers = &#123;</span><br><span class="line">            <span class="string">"Connection"</span>:<span class="string">"keep-alive"</span>,</span><br><span class="line">            <span class="string">"User-Agent"</span>:<span class="string">"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:61.0) Gecko/20100101 Firefox/61.0"</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#request = requests.Request(url=url,headers=headers);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = requests.get(url,headers = headers)</span><br><span class="line">            html = response.text;</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            print(<span class="string">"No"</span>);</span><br><span class="line">        self.deals(html);</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(self)</span>:</span></span><br><span class="line">        url = <span class="string">"https://www.ctguqmx.com/question/"</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">300</span> , <span class="number">400</span>):</span><br><span class="line">            self.load(<span class="string">"https://www.ctguqmx.com"</span>)</span><br><span class="line">             self.load(url + str(i));</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    spider = Spider();</span><br><span class="line">    spider.main();</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;尝试爬去qmx网站钟俊威的总结&quot;&gt;&lt;a href=&quot;#尝试爬去qmx网站钟俊威的总结&quot; class=&quot;headerlink&quot; title=&quot;尝试爬去qmx网站钟俊威的总结&quot;&gt;&lt;/a&gt;尝试爬去qmx网站钟俊威的总结&lt;/h1&gt;&lt;figure class=&quot;highli
      
    
    </summary>
    
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>spider</title>
    <link href="http://yoursite.com/2018/08/25/spider/"/>
    <id>http://yoursite.com/2018/08/25/spider/</id>
    <published>2018-08-25T10:58:13.000Z</published>
    <updated>2018-08-25T11:55:13.022Z</updated>
    
    <content type="html"><![CDATA[<h1 id="BeautifulSoup"><a href="#BeautifulSoup" class="headerlink" title="BeautifulSoup"></a>BeautifulSoup</h1><h2 id="BeautifilSoup-简介"><a href="#BeautifilSoup-简介" class="headerlink" title="BeautifilSoup 简介"></a>BeautifilSoup 简介</h2><pre><code>Beautiful Soup提供一些简单的、python式的函数用来处理导航、搜索、修改分析树等功能。它是一个工具箱，通过解析文档为用户提供需要抓取的数据因为简单，所以不需要多少代码就可以写出一个完整的应用程序。Beautiful Soup自动将输入文档转换为Unicode编码，输出文档转换为utf-8编码。你不需要考虑编码方式，除非文档没有指定一个编码方式，这时，Beautiful Soup就不能自动识别编码方式了。然后，你仅仅需要说明一下原始编码方式就可以了。    Beautiful Soup已成为和lxml、html6lib一样出色的python解释器，为用户灵活地提供不同的解析策略或强劲的速度。</code></pre><h2 id="创建beautifulsoup"><a href="#创建beautifulsoup" class="headerlink" title="创建beautifulsoup"></a>创建beautifulsoup</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">soup</span> = BeautifulSoup(html)</span><br></pre></td></tr></table></figure><h2 id="格式化输入beautifulSoup"><a href="#格式化输入beautifulSoup" class="headerlink" title="格式化输入beautifulSoup"></a>格式化输入beautifulSoup</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">print</span> soup.prettify()</span><br></pre></td></tr></table></figure><h2 id="四种对象"><a href="#四种对象" class="headerlink" title="四种对象"></a>四种对象</h2><p>Beautiful Soup将复杂HTML文档转换成一个复杂的树形结构,每个节点都是Python对象,所有对象可以归纳为4种:</p><pre><code>TagNavigableStringBeautifulSoupComment</code></pre><h3 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h3><pre><code>Tag 是什么？通俗点讲就是 HTML 中的一个个标签HTML 标签加上里面包括的内容就是 Tag，下面我们来感受一下怎样用 Beautiful Soup 我们可以利用 soup加标签名轻松地获取这些标签的内容需要注意的是它查找的是在所有内容中的第一个符合要求的标签，如果要查询所有的标签，我们在后面进行介绍。对于 Tag，它有两个重要的属性，是 name 和 attrs，下面我们分别来感受一下</code></pre><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name</span><br><span class="line"><span class="builtin-name">print</span> soup.name</span><br><span class="line"><span class="builtin-name">print</span> soup.head.name</span><br><span class="line"><span class="comment">#[document]</span></span><br><span class="line"><span class="comment">#head</span></span><br></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">全部</span><br><span class="line">print soup<span class="selector-class">.p</span><span class="selector-class">.attrs</span></span><br><span class="line">#&#123;<span class="string">'class'</span>: [<span class="string">'title'</span>], <span class="string">'name'</span>: <span class="string">'dromouse'</span>&#125;</span><br><span class="line">单个</span><br><span class="line">print soup<span class="selector-class">.p</span>[<span class="string">'class'</span>]</span><br><span class="line">#[<span class="string">'title'</span>]</span><br><span class="line">print soup<span class="selector-class">.p</span><span class="selector-class">.get</span>(<span class="string">'class'</span>)</span><br><span class="line">#[<span class="string">'title'</span>]</span><br></pre></td></tr></table></figure><pre><code>可以对属性和内容进行更改和删除</code></pre><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">soup.p['class']="newClass"</span><br><span class="line">print soup.p</span><br><span class="line">#<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"newClass"</span> <span class="attr">name</span>=<span class="string">"dromouse"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>The Dormouse's story<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">del soup.p['class']</span><br><span class="line">print soup.p</span><br><span class="line">#<span class="tag">&lt;<span class="name">p</span> <span class="attr">name</span>=<span class="string">"dromouse"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>The Dormouse's story<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="NavigableString"><a href="#NavigableString" class="headerlink" title="NavigableString"></a>NavigableString</h2><p>既然我们已经得到了标签的内容，那么问题来了，我们要想获取标签内部的文字怎么办呢？很简单，用 .string 即可，例如<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print soup<span class="selector-class">.p</span><span class="selector-class">.string</span></span><br><span class="line"><span class="selector-id">#The</span> Dormouse<span class="string">'s story</span></span><br></pre></td></tr></table></figure></p><h2 id="遍历文档树"><a href="#遍历文档树" class="headerlink" title="遍历文档树"></a>遍历文档树</h2><h3 id="直接子节点"><a href="#直接子节点" class="headerlink" title="直接子节点"></a>直接子节点</h3><pre><code>要点：.contents  .children  属性</code></pre><h4 id="contents"><a href="#contents" class="headerlink" title=".contents"></a>.contents</h4><pre><code>tag 的 .content 属性可以将tag的子节点以列表的方式输出</code></pre><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print soup.head.contents </span><br><span class="line"> #<span class="meta">[&lt;title&gt;The Dormouse's story&lt;/title&gt;]</span></span><br></pre></td></tr></table></figure><pre><code>输出方式为列表，我们可以用列表索引来获取它的某一个元素</code></pre><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">print</span> soup.head.contents[0]</span><br><span class="line"><span class="comment">#&lt;title&gt;The Dormouse's story&lt;/title&gt;</span></span><br></pre></td></tr></table></figure><h4 id="children"><a href="#children" class="headerlink" title=".children"></a>.children</h4><pre><code>它返回的不是一个 list，不过我们可以通过遍历获取所有子节点。我们打印输出 .children 看一下，可以发现它是一个 list 生成器对象</code></pre><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print soup<span class="selector-class">.head</span><span class="selector-class">.children</span></span><br><span class="line">#&lt;listiterator <span class="selector-tag">object</span> at <span class="number">0</span>x7f71457f5710&gt;</span><br></pre></td></tr></table></figure><pre><code>我们怎样获得里面的内容呢？很简单，遍历一下就好了，代码及结果如下</code></pre><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span>  soup<span class="selector-class">.body</span><span class="selector-class">.children</span>:</span><br><span class="line">    print child</span><br></pre></td></tr></table></figure><h3 id="所有子孙节点"><a href="#所有子孙节点" class="headerlink" title="所有子孙节点"></a>所有子孙节点</h3><pre><code>知识点：.descendants 属性</code></pre><h4 id="descendants"><a href="#descendants" class="headerlink" title=".descendants"></a>.descendants</h4><pre><code>.contents 和 .children 属性仅包含tag的直接子节点，.descendants 属性可以对所有tag的子孙节点进行递归循环，和 children类似，我们也需要遍历获取其中的内容。</code></pre><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> soup.descendants:</span><br><span class="line">    <span class="builtin-name">print</span> child</span><br></pre></td></tr></table></figure><pre><code>运行结果如下，可以发现，所有的节点都被打印出来了，先生最外层的 HTML标签，其次从 head 标签一个个剥离，以此类推。</code></pre><h3 id="节点内容"><a href="#节点内容" class="headerlink" title="节点内容"></a>节点内容</h3><h4 id="string-属性"><a href="#string-属性" class="headerlink" title=".string 属性"></a>.string 属性</h4><pre><code>如果tag只有一个 NavigableString 类型子节点,那么这个tag可以使用 .string 得到子节点。如果一个tag仅有一个子节点,那么这个tag也可以使用 .string 方法,输出结果与当前唯一子节点的 .string 结果相同。通俗点说就是：如果一个标签里面没有标签了，那么 .string 就会返回标签里面的内容。如果标签里面只有唯一的一个标签了，那么 .string 也会返回最里面的内容。</code></pre><p>如果tag包含了多个子节点,tag就无法确定，string 方法应该调用哪个子节点的内容, .string 的输出结果是 None</p><h3 id="多个内容"><a href="#多个内容" class="headerlink" title="多个内容"></a>多个内容</h3><pre><code>知识点： .strings  .stripped_strings 属性</code></pre><h4 id="strings"><a href="#strings" class="headerlink" title=".strings"></a>.strings</h4><pre><code>获取多个内容，不过需要遍历获取，比如下面的例子</code></pre><p>输出的字符串中可能包含了很多空格或空行,使用 .stripped_strings 可以去除多余空白内容<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="built_in">string</span> <span class="keyword">in</span> soup.stripped_strings:</span><br><span class="line">    <span class="built_in">print</span>(repr(<span class="built_in">string</span>))</span><br></pre></td></tr></table></figure></p><h3 id="父节点"><a href="#父节点" class="headerlink" title="父节点"></a>父节点</h3><pre><code>知识点： .parent 属性</code></pre><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> = soup.p</span><br><span class="line">print <span class="selector-tag">p</span><span class="selector-class">.parent</span><span class="selector-class">.name</span></span><br></pre></td></tr></table></figure><h3 id="全部父节点"><a href="#全部父节点" class="headerlink" title="全部父节点"></a>全部父节点</h3><pre><code>知识点：.parents 属性通过元素的 .parents 属性可以递归得到元素的所有父辈节点，例如</code></pre><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">content</span> = soup.head.<span class="built_in">title</span>.<span class="built_in">string</span></span><br><span class="line"><span class="keyword">for</span> parent <span class="keyword">in</span>  <span class="built_in">content</span>.parents:</span><br><span class="line">    <span class="built_in">print</span> parent.name</span><br></pre></td></tr></table></figure><h3 id="兄弟节点"><a href="#兄弟节点" class="headerlink" title="兄弟节点"></a>兄弟节点</h3><h4 id="知识点：-next-sibling-previous-sibling-属性"><a href="#知识点：-next-sibling-previous-sibling-属性" class="headerlink" title="知识点：.next_sibling  .previous_sibling 属性"></a>知识点：.next_sibling  .previous_sibling 属性</h4><pre><code>兄弟节点可以理解为和本节点处在统一级的节点，.next_sibling 属性获取了该节点的下一个兄弟节点，.previous_sibling 则与之相反，如果节点不存在，则返回 None</code></pre><p>注意：实际文档中的tag的 .next_sibling 和 .previous_sibling 属性通常是字符串或空白，因为空白或者换行也可以被视作一个节点，所以得到的结果可能是空白或者换行<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print soup<span class="selector-class">.p</span><span class="selector-class">.next_sibling</span></span><br><span class="line">print soup<span class="selector-class">.p</span><span class="selector-class">.prev_sibling</span></span><br><span class="line"><span class="selector-id">#None</span>   没有前一个兄弟节点，返回 None</span><br></pre></td></tr></table></figure></p><p>print soup.p.next_sibling.next_sibling<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">### 全部兄弟节点</span><br><span class="line"></span><br><span class="line">#### <span class="number">1</span>知识点：.next_siblings  .previous_siblings 属性</span><br><span class="line"></span><br><span class="line">通过 .next_siblings 和 .previous_siblings 属性可以对当前节点的兄弟节点迭代输出</span><br></pre></td></tr></table></figure></p><p>for sibling in soup.a.next_siblings:<br>    print(repr(sibling))<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 前后节点</span><br><span class="line">#### 知识点：.next_element  .previous_element 属性</span><br><span class="line"></span><br><span class="line">与 .next_sibling  .previous_sibling 不同，它并不是针对于兄弟节点，而是在所有节点，不分层次</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 所有前后节点</span><br><span class="line"></span><br><span class="line">#### 知识点：.next_elements  .previous_elements 属性</span><br><span class="line"></span><br><span class="line">通过 .next_elements 和 .previous_elements 的迭代器就可以向前或向后访问文档的解析内容,就好像文档正在被解析一样</span><br></pre></td></tr></table></figure></p><p>for element in last_a_tag.next_elements:<br>    print(repr(element))<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">以上是遍历文档树的基本用法。</span><br><span class="line"></span><br><span class="line">## 搜索文档树</span><br><span class="line">### find_all</span><br><span class="line">    find_all( name , attrs , recursive , text , **kwargs )</span><br><span class="line">    find_all() 方法搜索当前tag的所有tag子节点,并判断是否符合过滤器的条件</span><br><span class="line"></span><br><span class="line">#### name 参数</span><br><span class="line"></span><br><span class="line">name 参数可以查找所有名字为 name 的tag,字符串对象会被自动忽略掉</span><br><span class="line"></span><br><span class="line">#### 传字符串</span><br><span class="line"></span><br><span class="line">最简单的过滤器是字符串.在搜索方法中传入一个字符串参数,Beautiful Soup会查找与字符串完整匹配的内容,下面的例子用于查找文档中所有的&lt;b&gt;标签</span><br></pre></td></tr></table></figure></p><p>soup.find_all(‘b’)<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 传正则表达式</span><br><span class="line"></span><br><span class="line">如果传入正则表达式作为参数,Beautiful Soup会通过正则表达式的 match() 来匹配内容.下面例子中找出所有以b开头的标签,这表示&lt;body&gt;和&lt;b&gt;标签都应该被找到</span><br></pre></td></tr></table></figure></p><p>import re<br>for tag in soup.find_all(re.compile(“^b”)):<br>    print(tag.name)<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 传 <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="literal">True</span> 可以匹配任何值,下面代码查找到所有的tag,但是不会返回字符串节点</span><br></pre></td></tr></table></figure></p><p>for tag in soup.find_all(True):<br>    print(tag.name)<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#### 传方法</span><br><span class="line"></span><br><span class="line">如果没有合适过滤器,那么还可以定义一个方法,方法只接受一个元素参数 [<span class="number">4</span>] ,如果这个方法返回 <span class="literal">True</span> 表示当前元素匹配并且被找到,如果不是则反回 <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">下面方法校验了当前元素,如果包含 <span class="keyword">class</span> 属性却不包含 id 属性,那么将返回 <span class="literal">True</span>:</span><br></pre></td></tr></table></figure></p><p>def has_class_but_no_id(tag):<br>    return tag.has_attr(‘class’) and not tag.has_attr(‘id’)</p><p>soup.find_all(has_class_but_no_id)<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#### keyword 参数</span><br><span class="line"></span><br><span class="line">    注意：如果一个指定名字的参数不是搜索内置的参数名,搜索时会把该参数当作指定名字tag的属性来搜索,如果包含一个名字为 id 的参数,Beautiful Soup会搜索每个tag的”id”属性</span><br></pre></td></tr></table></figure></p><p>soup.find_all(id=’link2’)<br>soup.find_all(href=re.compile(“elsie”))<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用多个指定名字的参数可以同时过滤<span class="keyword">tag</span>的多个属性</span><br></pre></td></tr></table></figure></p><p>soup.find_all(href=re.compile(“elsie”), id=’link1’)<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">有些<span class="keyword">tag</span>属性在搜索不能使用,比如HTML5中的 data-* 属性</span><br><span class="line">但是可以通过 find_all() 方法的 attrs 参数定义一个字典参数来搜索包含特殊属性的<span class="keyword">tag</span></span><br><span class="line">```</span><br><span class="line">data_soup.find_all(<span class="attr">attrs=</span>&#123;<span class="string">"data-foo"</span>: <span class="string">"value"</span>&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="text-参数"><a href="#text-参数" class="headerlink" title="text 参数"></a>text 参数</h4><pre><code>通过 text 参数可以搜搜文档中的字符串内容.与 name 参数的可选值一样, text 参数接受 字符串 , 正则表达式 , 列表, True</code></pre><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(text=<span class="string">"Elsie"</span>)</span><br><span class="line"><span class="comment"># [u'Elsie']</span></span><br><span class="line"></span><br><span class="line">soup.find_all(text=[<span class="string">"Tillie"</span>, <span class="string">"Elsie"</span>, <span class="string">"Lacie"</span>])</span><br><span class="line"><span class="comment"># [u'Elsie', u'Lacie', u'Tillie']</span></span><br><span class="line"></span><br><span class="line">soup.find_all(text=re.compile(<span class="string">"Dormouse"</span>))</span><br><span class="line">[<span class="string">u"The Dormouse's story"</span>, <span class="string">u"The Dormouse's story"</span>]</span><br></pre></td></tr></table></figure><h4 id="limit-参数"><a href="#limit-参数" class="headerlink" title="limit 参数"></a>limit 参数</h4><pre><code>find_all() 方法返回全部的搜索结构,如果文档树很大那么搜索会很慢.如果我们不需要全部结果,可以使用 limit 参数限制返回结果的数量.当搜索到的结果数量达到 limit 的限制时,就停止搜索返回结果.文档树中有3个tag符合搜索条件,但结果只返回了2个,因为我们限制了返回数量</code></pre><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="string">"a"</span>, <span class="attribute">limit</span>=2)</span><br></pre></td></tr></table></figure><h4 id="recursive-参数"><a href="#recursive-参数" class="headerlink" title="recursive 参数"></a>recursive 参数</h4><pre><code>调用tag的 find_all() 方法时,Beautiful Soup会检索当前tag的所有子孙节点,如果只想搜索tag的直接子节点,可以使用参数 recursive=False .</code></pre><p>一段简单的文档:</p><p><html><br> <head><br>  <title><br>   The Dormouse’s story<br>  </title><br> </head><br><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">是否使用 recursive 参数的搜索结果:</span><br><span class="line">soup.html.find_all(<span class="string">"title"</span>)</span><br><span class="line"># <span class="meta">[&lt;title&gt;The Dormouse's story&lt;/title&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.html.find_all(<span class="string">"title"</span>, recursive=False)</span><br></pre></td></tr></table></figure></html></p><h3 id="find-name-attrs-recursive-text-kwargs"><a href="#find-name-attrs-recursive-text-kwargs" class="headerlink" title="find( name , attrs , recursive , text , **kwargs )"></a>find( name , attrs , recursive , text , **kwargs )</h3><pre><code>它与 find_all() 方法唯一的区别是 find_all() 方法的返回结果是值包含一个元素的列表,而 find() 方法直接返回结果</code></pre><h3 id="find-parents-find-parent"><a href="#find-parents-find-parent" class="headerlink" title="find_parents()  find_parent()"></a>find_parents()  find_parent()</h3><pre><code>find_all() 和 find() 只搜索当前节点的所有子节点,孙子节点等. find_parents() 和 find_parent() 用来搜索当前节点的父辈节点,搜索方法与普通tag的搜索方法相同,搜索文档搜索文档包含的内容</code></pre><h3 id="find-next-siblings-find-next-sibling"><a href="#find-next-siblings-find-next-sibling" class="headerlink" title="find_next_siblings()  find_next_sibling()"></a>find_next_siblings()  find_next_sibling()</h3><pre><code>这2个方法通过 .next_siblings 属性对当 tag 的所有后面解析的兄弟 tag 节点进行迭代, find_next_siblings() 方法返回所有符合条件的后面的兄弟节点,find_next_sibling() 只返回符合条件的后面的第一个tag节点</code></pre><h3 id="find-previous-siblings-find-previous-sibling"><a href="#find-previous-siblings-find-previous-sibling" class="headerlink" title="find_previous_siblings()  find_previous_sibling()"></a>find_previous_siblings()  find_previous_sibling()</h3><pre><code>这2个方法通过 .previous_siblings 属性对当前 tag 的前面解析的兄弟 tag 节点进行迭代, find_previous_siblings() 方法返回所有符合条件的前面的兄弟节点, find_previous_sibling() 方法返回第一个符合条件的前面的兄弟节点</code></pre><h3 id="find-all-next-find-next"><a href="#find-all-next-find-next" class="headerlink" title="find_all_next()  find_next()"></a>find_all_next()  find_next()</h3><pre><code>这2个方法通过 .next_elements 属性对当前 tag 的之后的 tag 和字符串进行迭代, find_all_next() 方法返回所有符合条件的节点, find_next() 方法返回第一个符合条件的节点</code></pre><h3 id="find-all-previous-和-find-previous"><a href="#find-all-previous-和-find-previous" class="headerlink" title="find_all_previous() 和 find_previous()"></a>find_all_previous() 和 find_previous()</h3><pre><code>这2个方法通过 .previous_elements 属性对当前节点前面的 tag 和字符串进行迭代, find_all_previous() 方法返回所有符合条件的节点, find_previous()方法返回第一个符合条件的节点注：以上（2）（3）（4）（5）（6）（7）方法参数用法与 find_all() 完全相同，原理均类似，在此不再赘述。</code></pre><h2 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h2><p>我们在写 CSS 时，标签名不加任何修饰，类名前加点，id名前加 #，在这里我们也可以利用类似的方法来筛选元素，用到的方法是 soup.select()，返回类型是 list</p><h3 id="通过标签名查找"><a href="#通过标签名查找" class="headerlink" title="通过标签名查找"></a>通过标签名查找</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> soup.<span class="built_in">select</span>('<span class="built_in">title</span>')</span><br></pre></td></tr></table></figure><h3 id="通过类名查找"><a href="#通过类名查找" class="headerlink" title="通过类名查找"></a>通过类名查找</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span> soup.<span class="keyword">select</span>(<span class="string">'.sister'</span>)</span><br></pre></td></tr></table></figure><h3 id="通过-id-名查找"><a href="#通过-id-名查找" class="headerlink" title="通过 id 名查找"></a>通过 id 名查找</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> soup.<span class="built_in">select</span>('<span class="meta">#link1')</span></span><br></pre></td></tr></table></figure><h3 id="组合查找"><a href="#组合查找" class="headerlink" title="组合查找"></a>组合查找</h3><pre><code>组合查找即和写 class 文件时，标签名与类名、id名进行的组合原理是一样的，例如查找 p 标签中，id 等于 link1的内容，二者需要用空格分开</code></pre><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> soup.<span class="built_in">select</span>('p <span class="meta">#link1')</span></span><br></pre></td></tr></table></figure><h3 id="直接子标签查找"><a href="#直接子标签查找" class="headerlink" title="直接子标签查找"></a>直接子标签查找</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> soup.<span class="built_in">select</span>(<span class="string">"head &gt; title"</span>)</span><br></pre></td></tr></table></figure><h3 id="属性查找"><a href="#属性查找" class="headerlink" title="属性查找"></a>属性查找</h3><pre><code>查找时还可以加入属性元素，属性需要用中括号括起来，注意属性和标签属于同一节点，所以中间不能加空格，否则会无法匹配到。</code></pre><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print soup.select(<span class="symbol">'a</span>[<span class="class"><span class="keyword">class</span></span>=<span class="string">"sister"</span>]')</span><br></pre></td></tr></table></figure><pre><code>同样，属性仍然可以与上述查找方式组合，不在同一节点的空格隔开，同一节点的不加空格</code></pre><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print soup.<span class="keyword">select</span>(<span class="symbol">'p</span> a[href=<span class="string">"http://example.com/elsie"</span>]')</span><br></pre></td></tr></table></figure><pre><code>以上的 select 方法返回的结果都是列表形式，可以遍历形式输出，然后用 get_text() 方法来获取它的内容。</code></pre><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(html, 'lxml')</span><br><span class="line"><span class="keyword">print</span> <span class="built_in">type</span>(soup.<span class="built_in">select</span>('<span class="built_in">title</span>'))</span><br><span class="line"><span class="keyword">print</span> soup.<span class="built_in">select</span>('<span class="built_in">title</span>')[<span class="number">0</span>].get_text()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">title</span> in soup.<span class="built_in">select</span>('<span class="built_in">title</span>'):</span><br><span class="line">    <span class="keyword">print</span> <span class="built_in">title</span>.get_text()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;BeautifulSoup&quot;&gt;&lt;a href=&quot;#BeautifulSoup&quot; class=&quot;headerlink&quot; title=&quot;BeautifulSoup&quot;&gt;&lt;/a&gt;BeautifulSoup&lt;/h1&gt;&lt;h2 id=&quot;BeautifilSoup-简介&quot;&gt;&lt;a 
      
    
    </summary>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>鸟哥的linux私房菜笔记</title>
    <link href="http://yoursite.com/2018/08/13/%E9%B8%9F%E5%93%A5%E7%9A%84linux%E7%A7%81%E6%88%BF%E8%8F%9C%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2018/08/13/鸟哥的linux私房菜笔记/</id>
    <published>2018-08-13T12:25:31.000Z</published>
    <updated>2018-08-13T12:37:38.679Z</updated>
    
    <content type="html"><![CDATA[<p>这里记录的我在第二次阅读鸟哥的基础篇记下的笔记。</p><h1 id="selinux-初探"><a href="#selinux-初探" class="headerlink" title="selinux 初探"></a>selinux 初探</h1><pre><code>selinux(security enhanced linux) 最初目的是因为许多人发现系统出现问题大部分都在于内部员工的资源的误用。于是美国国家安全局着手处理了这方面的管控。他使用linux 作为研究的目标，并将结果整合到了linux 内核中，形成了selinux</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;这里记录的我在第二次阅读鸟哥的基础篇记下的笔记。&lt;/p&gt;
&lt;h1 id=&quot;selinux-初探&quot;&gt;&lt;a href=&quot;#selinux-初探&quot; class=&quot;headerlink&quot; title=&quot;selinux 初探&quot;&gt;&lt;/a&gt;selinux 初探&lt;/h1&gt;&lt;pre&gt;&lt;cod
      
    
    </summary>
    
      <category term="linux" scheme="http://yoursite.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>python</title>
    <link href="http://yoursite.com/2018/08/06/python/"/>
    <id>http://yoursite.com/2018/08/06/python/</id>
    <published>2018-08-06T13:56:16.000Z</published>
    <updated>2018-08-06T13:59:05.828Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight elm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class
      
    
    </summary>
    
      <category term="categories" scheme="http://yoursite.com/categories/categories/"/>
    
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>net</title>
    <link href="http://yoursite.com/2018/08/06/net/"/>
    <id>http://yoursite.com/2018/08/06/net/</id>
    <published>2018-08-06T04:45:06.000Z</published>
    <updated>2018-08-07T00:34:14.784Z</updated>
    
    <content type="html"><![CDATA[<p>#数据链路层</p><p><em>链路是只从一个结点到相邻结点的一段物理线路，中间没有其他交换结点，而数据链路是指当需要在一条线路上传输数据时，处理必须有一条物理线路外，还必须有必要的通信协议来控制这些数据的传输（现在最常用的办法是使用网路适配器（既有硬件，也有软件）；来实现这些协议）</em></p><h2 id="数据链路层的三个基本问题"><a href="#数据链路层的三个基本问题" class="headerlink" title="数据链路层的三个基本问题"></a>数据链路层的三个基本问题</h2><h3 id="封装成帧"><a href="#封装成帧" class="headerlink" title="封装成帧"></a>封装成帧</h3><pre><code>封装成帧就是在一段数据的前后分别添加首部和尾部，这样就构成了一个帧。接收端在收到物理层上交的比特流后，能够根据首部和尾部的标记，识别到帧的开始和结束。网络层的IP数据报传送到数据链路层就成为了帧的数据部分。</code></pre><p><em>MTU最大传送单元(maximum transfer unit) 为了提高帧的传送效率使帧的数据部分长度尽可能的大于首部和尾部的长度，但要MTU</em></p><h4 id="帧定界符"><a href="#帧定界符" class="headerlink" title="帧定界符"></a>帧定界符</h4><pre><code>SOH （start of head）二进制00000001 EOT  (end of transmission) 二进制00000100在传输钟出现差错时，接收端能够根于SOH，EOT 进行取舍</code></pre><hr><h3 id="透明传输"><a href="#透明传输" class="headerlink" title="透明传输"></a>透明传输</h3><h4 id="透明传输含义"><a href="#透明传输含义" class="headerlink" title="透明传输含义"></a>透明传输含义</h4><pre><code>由于帧的开始和结束标记是专门指明的控制字符，因此，所传输的数据中的任何8比特的组合一定不允许和定界符的控制字符的比特编码一样，否则会出现帧定界符错误</code></pre><h4 id="透明传输的实现方法–-字节填充"><a href="#透明传输的实现方法–-字节填充" class="headerlink" title="透明传输的实现方法– 字节填充"></a>透明传输的实现方法– 字节填充</h4><pre><code>发送端的数据链路层在数据中出现帧定界符时，在SOH或EOT前插一个转义字符ESC（00011011）接受端在吧数据上交网络层前删掉这个转义字符ESC如果数据钟有转义字符，则再在其前添加一个转义字符</code></pre><hr><h3 id="差错控制"><a href="#差错控制" class="headerlink" title="差错控制"></a>差错控制</h3><h4 id="比特差错"><a href="#比特差错" class="headerlink" title="比特差错"></a>比特差错</h4><pre><code>比特差错是传输错误的一种，传输错误的比特占所传输比特总数的比率叫做误码率BER.</code></pre><h4 id="帧丢失，帧重复，帧乱序"><a href="#帧丢失，帧重复，帧乱序" class="headerlink" title="帧丢失，帧重复，帧乱序"></a>帧丢失，帧重复，帧乱序</h4><h4 id="循环冗余检测的检错技术-CRC-cycle-Redundancy-Check-CRC只能检查比特差错"><a href="#循环冗余检测的检错技术-CRC-cycle-Redundancy-Check-CRC只能检查比特差错" class="headerlink" title="循环冗余检测的检错技术 CRC (cycle Redundancy Check) CRC只能检查比特差错"></a>循环冗余检测的检错技术 CRC (cycle Redundancy Check) CRC只能检查比特差错</h4><pre><code>1.将多项式转化为二进制序列，由G（X） = X^4 + X^3 + 1可知二进制一种有五位，第4位、第三位和第零位分别为1，则序列为110012.多项式的位数位5，则在数据帧的后面加上5-1位0，数据帧变为101100110000，然后使用模2除法除以        除数11001，得到余数。3.将计算出来的CRC校验码添加在原始帧的后面，真正的数据帧为101100110100，再把这个数据帧发送到接收端。4.接收端收到数据帧后，用上面选定的除数，用模2除法除去，验证余数是否为0，如果为0，则说明数据帧没有出错。</code></pre><p><img src="/2018/08/06/net/CRC.png" alt="CRC"></p><hr><h2 id="适配器，转发器，集线器，网桥，以太网交换几的作用以及使用场合"><a href="#适配器，转发器，集线器，网桥，以太网交换几的作用以及使用场合" class="headerlink" title="适配器，转发器，集线器，网桥，以太网交换几的作用以及使用场合"></a>适配器，转发器，集线器，网桥，以太网交换几的作用以及使用场合</h2><hr><h2 id="点对点信道"><a href="#点对点信道" class="headerlink" title="点对点信道"></a>点对点信道</h2><h3 id="主要步骤"><a href="#主要步骤" class="headerlink" title="主要步骤"></a>主要步骤</h3><ol><li>结点A 的数据链路层吧网络层交下来的IP数据报添加首部和尾部封装成帧</li><li>结点A 把封装好的帧发送给结点B的数据链路层</li><li>若结点B 的数据链路层收到的帧无差错，则从收到的帧中提取ip数据报上交给网络层，否则丢弃此帧</li></ol><hr><h3 id="ppp-协议"><a href="#ppp-协议" class="headerlink" title="ppp 协议"></a>ppp 协议</h3><h4 id="ppp协议的需求"><a href="#ppp协议的需求" class="headerlink" title="ppp协议的需求"></a>ppp协议的需求</h4><pre><code>1.简单2.封装成帧3.透明性4.多种网络层协议5.多种类型链路6.差错控制7.检查链接状态8.最大传输单元9.网络地址协商10.数据压缩协商</code></pre><h3 id="ppp协议的组成"><a href="#ppp协议的组成" class="headerlink" title="ppp协议的组成"></a>ppp协议的组成</h3><pre><code>1.数据链路层协议可以用于异步穿行或同步串行的介质2.它使用LCP（link control protocol)链路控制协议 建立并维护数据链路链接3.NCP (network control protocol) 网络控制协议允许点到点链接上使用多种网络层协议</code></pre><hr><h3 id="ppp协议的帧格式"><a href="#ppp协议的帧格式" class="headerlink" title="ppp协议的帧格式"></a>ppp协议的帧格式</h3><h4 id="ppp协议的帧格式，图解"><a href="#ppp协议的帧格式，图解" class="headerlink" title="ppp协议的帧格式，图解"></a>ppp协议的帧格式，图解</h4><p><img src="/2018/08/06/net/ppp_protocol.png" alt="ppp协议的帧"></p><h4 id="ppp-协议帧格式个字段的意义"><a href="#ppp-协议帧格式个字段的意义" class="headerlink" title="ppp 协议帧格式个字段的意义"></a>ppp 协议帧格式个字段的意义</h4><pre><code>1.F ： 标记字段 规定为0x7E ,标记开始和结束，因此标记字段就是ppp帧的定界符2.A : 地址字段，规定为0xFF（最初曾考虑对这两个字段的值进行其他定义，而然至今未给出）3.C :控制字段，PPP首部的第四个字段是2个字节的协议字段4.FCS : CRC的帧检验序列FCS。       　1.当协议字段为0x0021时，PPP帧的信息字段就是IP数据报，    　2.当为0xC021时，则信息字段是PPP链路控制协议LCP的数据，    　3.当为0x8021表示这个网络层的控制数据    　4.0xC023 表示为安全性认证PAP    　5.0xC025 表示LQR    　6.0xC233 安全性认证认证CHAP </code></pre><h2 id="广播信道"><a href="#广播信道" class="headerlink" title="广播信道"></a>广播信道</h2><p>###特点</p><h3 id="CSMA-CD-协议"><a href="#CSMA-CD-协议" class="headerlink" title="CSMA/CD 协议"></a>CSMA/CD 协议</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;#数据链路层&lt;/p&gt;
&lt;p&gt;&lt;em&gt;链路是只从一个结点到相邻结点的一段物理线路，中间没有其他交换结点，而数据链路是指当需要在一条线路上传输数据时，处理必须有一条物理线路外，还必须有必要的通信协议来控制这些数据的传输（现在最常用的办法是使用网路适配器（既有硬件，也有软件）；来
      
    
    </summary>
    
    
      <category term="-net" scheme="http://yoursite.com/tags/net/"/>
    
  </entry>
  
  <entry>
    <title>linux</title>
    <link href="http://yoursite.com/2018/08/05/linux/"/>
    <id>http://yoursite.com/2018/08/05/linux/</id>
    <published>2018-08-05T04:45:23.000Z</published>
    <updated>2018-08-06T05:50:24.204Z</updated>
    
    <content type="html"><![CDATA[<h1 id="vim-常用命令"><a href="#vim-常用命令" class="headerlink" title="vim 常用命令"></a>vim 常用命令</h1><h2 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h2><pre><code>H 移动到屏幕最上方一行的第一个字符M 移动到屏幕最中央一行的第一个字符L 移动到屏幕最下方一行的第一个字符w 向前移动一个单词（光标停在单词首部），如果已到行尾，则转至下一行行首。此命令快，可以代替l命令。b 向后移动一个单词 2b 向后移动2个单词e，同w，只不过是光标停在单词尾部ge，同b，光标停在单词尾部。^ 移动到本行第一个非空白字符上。0（数字0）移动到本行第一个字符上，&lt;HOME&gt; 移动到本行第一个字符。同0健。$ 移动到行尾 3$ 移动到下面3行的行尾gg 移动到文件头。 = [[G（shift + g） 移动到文件尾。 = ]]f（find）命令也可以用于移动，fx将找到光标后第一个为x的字符，3fd将找到第三个为d的字符。F 同f，反向查找。跳到指定行，冒号+行号，回车，比如跳到240行就是 :240回车。另一个方法是行号+G，比如230G跳到230行</code></pre><h2 id="撤销"><a href="#撤销" class="headerlink" title="撤销"></a>撤销</h2><pre><code>u 撤销（Undo）U 撤销对整行的操作Ctrl + r 重做（Redo），即撤销的撤销。</code></pre><h2 id="删除命令"><a href="#删除命令" class="headerlink" title="删除命令"></a>删除命令</h2><pre><code>x 删除当前字符3x 删除当前光标开始向后三个字符X 删除当前字符的前一个字符。X=dhdl 删除当前字符， dl=xdh 删除前一个字符dd 删除当前行dj 删除上一行dk 删除下一行10d 删除当前行开始的10行。D 删除当前字符至行尾。D=d$d$ 删除当前字符之后的所有字符（本行）kdgg 删除当前行之前所有行（不包括当前行）jdG（jd shift + g）   删除当前行之后所有行（不包括当前行）:1,10d 删除1-10行:11,$d 删除11行及以后所有的行:1,$d 删除所有行J(shift + j)　　删除两行之间的空行，实际上是合并两行。</code></pre><h1 id="tar-的常用方法"><a href="#tar-的常用方法" class="headerlink" title="tar 的常用方法"></a>tar 的常用方法</h1><pre><code>-tar -c新建打包文件,-x 压缩解压缩-j bzip2压缩解压缩-z gzip压缩解压缩-v 显示文件名-f 后接被处理的文件名tar -cjvf --tar -xjvf --</code></pre><h1 id="linux下解压windows文件乱码问题"><a href="#linux下解压windows文件乱码问题" class="headerlink" title="linux下解压windows文件乱码问题"></a>linux下解压windows文件乱码问题</h1><pre><code>unzip -O Cp936 xxx.zip</code></pre><h1 id="firewall"><a href="#firewall" class="headerlink" title="firewall:"></a>firewall:</h1><p><em>使用命令行管理firewall之前，说明有关于防火墙的策略独立性：明确的策略，策略之间无关联。 比如mysql使用3306，firewall添加mysql服务但未添加3306，当查询3306端口状态会显示no； 同理，添加3306端口，但未添加mysql服务，当查询mysql服务是否被firewalld允许时，显示no。在这两种情况下，外网都可以正常访问，也必须能访问，这里的逻辑不存在问题。同样，拿Java程序开发来类比：往hashMap.put进service与port，当get的时候就成了两码事,即便所操作的是关于mysql服务</em></p><p>#防火墙常用的命令</p><h3 id="1-查看防火墙状态"><a href="#1-查看防火墙状态" class="headerlink" title="1.查看防火墙状态"></a>1.查看防火墙状态</h3><pre><code>systemctl status firewalld</code></pre><h3 id="2-查看开放的服务-端口："><a href="#2-查看开放的服务-端口：" class="headerlink" title="2.查看开放的服务/端口："></a>2.查看开放的服务/端口：</h3><pre><code>firewall-cmd --list-servicefirewall-cmd --list-port</code></pre><h3 id="3-查询指定的端口是否永久开放"><a href="#3-查询指定的端口是否永久开放" class="headerlink" title="3.查询指定的端口是否永久开放"></a>3.查询指定的端口是否永久开放</h3><pre><code>firewall-cmd --permanent --query-port=1000/tcp</code></pre><h3 id="4-查询指定的服务-端口："><a href="#4-查询指定的服务-端口：" class="headerlink" title="4.查询指定的服务/端口："></a>4.查询指定的服务/端口：</h3><pre><code>firewall-cmd --query-service sshfirewall-cmd --query-port=3306/tcp</code></pre><h3 id="5-添加服务："><a href="#5-添加服务：" class="headerlink" title="5.添加服务："></a>5.添加服务：</h3><pre><code>firewall-cmd --permanent --add-service=ftpfirewall-cmd --permanent --remove-service=ftp</code></pre><h3 id="6-添加端口"><a href="#6-添加端口" class="headerlink" title="6.添加端口"></a>6.添加端口</h3><pre><code>方式1：  firewall-cmd --permanent --add-port=3306/tcp  firewall-cmd --permanent --add-port=1522/tcp  firewall-cmd --reload方式2：  cp  /usr/lib/firewalld/services/ssh.xml /etc/firewalld/services/ssh.xml  vi  /etc/firewalld/services/ssh.xml  vi /etc/firewalld/zones/public.xml</code></pre><h3 id="7-查看存在的zones"><a href="#7-查看存在的zones" class="headerlink" title="7.查看存在的zones:"></a>7.查看存在的zones:</h3><pre><code>firewall-cmd --get-zones</code></pre><h3 id="8-当前使用的zone："><a href="#8-当前使用的zone：" class="headerlink" title="8.当前使用的zone："></a>8.当前使用的zone：</h3><pre><code>firewall-cmd --get-active-zones</code></pre><h3 id="9-zone为public的所有策略："><a href="#9-zone为public的所有策略：" class="headerlink" title="9.zone为public的所有策略："></a>9.zone为public的所有策略：</h3><pre><code>firewall-cmd --zone=public --list-all</code></pre><h3 id="10-设置默认的zone-（public是最合适的，也是firewall默认的）"><a href="#10-设置默认的zone-（public是最合适的，也是firewall默认的）" class="headerlink" title="10.设置默认的zone: （public是最合适的，也是firewall默认的）"></a>10.设置默认的zone: （public是最合适的，也是firewall默认的）</h3><pre><code>firewall-cmd --set-default-zone=public</code></pre><p>#结果终端提示:无法获得锁/var/lib/dpkg/lock</p><pre><code>结果终端提示:无法获得锁/var/lib/dpkg/lockE: 无法锁定管理目录(/var/lib/dpkg/)，是否有其他进程正占用它？”解决办法如下：1.终端输入 ps  -aux ，列出进程,找到含有apt-get的进程，直接sudo kill PID解决。2.强制解锁--命令:sudo rm /var/cache/apt/archives/locksudo rm /var/lib/dpkg/lock</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;vim-常用命令&quot;&gt;&lt;a href=&quot;#vim-常用命令&quot; class=&quot;headerlink&quot; title=&quot;vim 常用命令&quot;&gt;&lt;/a&gt;vim 常用命令&lt;/h1&gt;&lt;h2 id=&quot;移动&quot;&gt;&lt;a href=&quot;#移动&quot; class=&quot;headerlink&quot; titl
      
    
    </summary>
    
      <category term="categories" scheme="http://yoursite.com/categories/categories/"/>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>algorithm</title>
    <link href="http://yoursite.com/2018/08/05/algorithm/"/>
    <id>http://yoursite.com/2018/08/05/algorithm/</id>
    <published>2018-08-05T04:44:07.000Z</published>
    <updated>2018-09-03T13:08:30.288Z</updated>
    
    <content type="html"><![CDATA[<h1 id="挑战程序设计竞赛练习"><a href="#挑战程序设计竞赛练习" class="headerlink" title="挑战程序设计竞赛练习"></a>挑战程序设计竞赛练习</h1><h2 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h2><h3 id="例题poj2236"><a href="#例题poj2236" class="headerlink" title="例题poj2236"></a>例题poj2236</h3><p><img src="/2018/08/05/algorithm/poj/poj2236.png" alt="poj2236"></p><h3 id="思路-并查集"><a href="#思路-并查集" class="headerlink" title="思路 并查集"></a>思路 并查集</h3><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 1005</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">int</span> d,n;</span><br><span class="line"><span class="keyword">int</span> parent[N];</span><br><span class="line"><span class="keyword">bool</span> visit[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x,y;</span><br><span class="line">&#125;p[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == parent[x])&#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> parent[x] = find(parent[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dis</span><span class="params">(point x, point y)</span></span>&#123;</span><br><span class="line">    <span class="comment">//return   (((LL)x.x - (LL)y.x) * ((LL)x.x + (LL)y.x) + ((LL)x.y - (LL)y.y) * ((LL)x.y - (LL)y.y))&lt;= (LL)d *(LL)d;</span></span><br><span class="line">    LL xx = x.x - y.x;</span><br><span class="line">    LL yy = x.y - y.y;</span><br><span class="line">    <span class="keyword">return</span> xx*xx + yy*yy &lt;= (LL)d * (LL)d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= n ;i ++)&#123;</span><br><span class="line">        parent[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(visit,<span class="number">0</span>,<span class="keyword">sizeof</span>(visit));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> tmp;</span><br><span class="line">    <span class="keyword">int</span> t,t2;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;d);</span><br><span class="line">    init();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= n ;i ++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;p[i].x,&amp;p[i].y);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%c%c"</span>,&amp;tmp,&amp;tmp))&#123;</span><br><span class="line">        <span class="keyword">if</span>(tmp == <span class="string">'O'</span>)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t);</span><br><span class="line">            visit[t] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= n ; i ++)&#123;</span><br><span class="line">               <span class="comment">// cout&lt;&lt;"-------&gt;"&lt;&lt;i&lt;&lt;" "&lt;&lt;t&lt;&lt;endl;</span></span><br><span class="line">                <span class="keyword">if</span>(i != t &amp;&amp; visit[i] &amp;&amp; dis(p[i],p[t]))&#123;</span><br><span class="line">                </span><br><span class="line">                    <span class="keyword">int</span> x = find(i);</span><br><span class="line">                    <span class="keyword">int</span> y = find(t);</span><br><span class="line">            <span class="comment">//    cout&lt;&lt;"---&gt;&gt;"&lt;&lt;x&lt;&lt;" "&lt;&lt;y&lt;&lt;endl;</span></span><br><span class="line">                    <span class="keyword">if</span>(x != y )&#123;</span><br><span class="line">                        parent[y] = x;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(tmp == <span class="string">'S'</span>)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;t,&amp;t2);   </span><br><span class="line">            <span class="keyword">int</span> x = find(t);</span><br><span class="line">            <span class="keyword">int</span> y = find(t2);</span><br><span class="line">           <span class="comment">// cout&lt;&lt;"find "&lt;&lt;x&lt;&lt;" "&lt;&lt;y&lt;&lt;endl;</span></span><br><span class="line">            x != y ? <span class="built_in">printf</span>(<span class="string">"FAIL\n"</span>):<span class="built_in">printf</span>(<span class="string">"SUCCESS\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="动态规划之背包问题"><a href="#动态规划之背包问题" class="headerlink" title="动态规划之背包问题"></a>动态规划之背包问题</h2><h3 id="01背包问题"><a href="#01背包问题" class="headerlink" title="01背包问题"></a>01背包问题</h3><h4 id="例题-nyoj-289"><a href="#例题-nyoj-289" class="headerlink" title="例题 nyoj 289"></a>例题 nyoj 289</h4><p><img src="/2018/08/05/algorithm/poj/nyoj289.png" alt="nyoj289"></p><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><pre><code>标准01背包问题 </code></pre><h4 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 10050</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> dp[N];</span><br><span class="line">    <span class="keyword">int</span> c, n;</span><br><span class="line">    <span class="keyword">int</span> v[N],w[N];<span class="comment">//values.weight</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;c),n || c)&#123;</span><br><span class="line">        <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; n ;i ++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;w[i],&amp;v[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//dp</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ;i &lt; n ;i ++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = c ;j &gt;= w[i] ;j -- )&#123;</span><br><span class="line">                dp[j] = max(dp[j - w[i]] + v[i],dp[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[c]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="完全背包"><a href="#完全背包" class="headerlink" title="完全背包"></a>完全背包</h3><h4 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h4><p><img src="/2018/08/05/algorithm/poj/nyoj311.png" alt="nyoj311"></p><h3 id="背包空间很大，但价值很小的背包问题"><a href="#背包空间很大，但价值很小的背包问题" class="headerlink" title="背包空间很大，但价值很小的背包问题"></a>背包空间很大，但价值很小的背包问题</h3><h4 id="例题nyoj-860"><a href="#例题nyoj-860" class="headerlink" title="例题nyoj 860"></a>例题nyoj 860</h4><h2 id="贪心"><a href="#贪心" class="headerlink" title="贪心"></a>贪心</h2><h3 id="poj-3617"><a href="#poj-3617" class="headerlink" title="poj 3617"></a>poj 3617</h3><h4 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h4><p><img src="/2018/08/05/algorithm/poj/3617.png" alt="poj3617"></p><h4 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h4><pre><code>贪心问题</code></pre><h4 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 2050</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">char</span> p[N];</span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> b = n - <span class="number">1</span>; <span class="comment">// head,and tail;</span></span><br><span class="line">    <span class="built_in">string</span> x;</span><br><span class="line">    <span class="keyword">while</span> (a &lt;= b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">bool</span> left = <span class="literal">true</span>; <span class="comment">// select left side or right side</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i + a &lt; b; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (p[a + i] &lt; p[b - i])&#123;</span><br><span class="line">                left = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(p[a + i] &gt; p[b - i])&#123;</span><br><span class="line">                left = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(left)&#123;</span><br><span class="line">         </span><br><span class="line">            x += p[a++];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            x += p[b--];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%c"</span>, &amp;p[i]);</span><br><span class="line">        getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">string</span> ans  = solve();</span><br><span class="line">    <span class="keyword">int</span> len = ans.length();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; len;  i ++)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%c"</span>,ans[i]);</span><br><span class="line">        <span class="keyword">if</span>( (i + <span class="number">1</span>) % <span class="number">80</span> == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">        &#125;     </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="poj-1852"><a href="#poj-1852" class="headerlink" title="poj 1852"></a>poj 1852</h3><p>#<a href="algorithm/poj/1852.png">poj1852</a></p><h4 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h4><pre><code>两只蚂蚁碰头掉头等价于两只蚂蚁按都按原方向继续走</code></pre><h4 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="keyword">int</span> n ,m;</span><br><span class="line">    <span class="keyword">int</span> tmp;</span><br><span class="line">    <span class="keyword">int</span> mins = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> maxs = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    <span class="keyword">while</span>(T --)&#123;</span><br><span class="line">        mins = <span class="number">0</span>; maxs = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; m ;i ++ )&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;tmp);    </span><br><span class="line">            mins = max(mins,min(tmp,n-tmp));</span><br><span class="line">           <span class="comment">// printf("--&gt; %d %d\n",tmp,n-tmp);</span></span><br><span class="line">            maxs = max(maxs,max(tmp,n-tmp));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,mins,maxs);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>    ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="poj-2386"><a href="#poj-2386" class="headerlink" title="poj 2386"></a>poj 2386</h3><p><img src="/2018/08/05/algorithm/poj/2386.png" alt="poj2386"></p><h4 id="思路-3"><a href="#思路-3" class="headerlink" title="思路"></a>思路</h4><pre><code>搜索问题</code></pre><h4 id="代码-4"><a href="#代码-4" class="headerlink" title="代码"></a>代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//DFS</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 150</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> p[N][N];</span><br><span class="line"><span class="keyword">int</span> dx[<span class="number">8</span>] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dy[<span class="number">8</span>] = &#123;<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;;</span><br><span class="line"><span class="comment">//bool visit[N][N];</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span> || x &gt;= n || y &lt; <span class="number">0</span> || y &gt;= m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (p[x][y] == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// printf("%d %d\n",x,y);</span></span><br><span class="line">    p[x][y] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (p[x + dx[i]][y + dy[i]] == <span class="number">1</span> )</span><br><span class="line">            dfs(x + dx[i], y + dy[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> tmp;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d\n"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%c"</span>, &amp;tmp);</span><br><span class="line">            <span class="keyword">if</span> (tmp != <span class="string">'\n'</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//printf("%c",tmp);</span></span><br><span class="line">                <span class="keyword">if</span> (tmp == <span class="string">'W'</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    p[i][j] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    p[i][j] = <span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (p[i][j] == <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                dfs(i, j);</span><br><span class="line">                cnt++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="利用优先队列解题"><a href="#利用优先队列解题" class="headerlink" title="利用优先队列解题"></a>利用优先队列解题</h2><h3 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h3><p><img src="/2018/08/05/algorithm/poj/poj2431.png" alt="poj2431"></p><h3 id="思路，题意为用最少加油次数跑到终点。可以等价与在当前加油站可以加之前经过加油站打油。"><a href="#思路，题意为用最少加油次数跑到终点。可以等价与在当前加油站可以加之前经过加油站打油。" class="headerlink" title="思路，题意为用最少加油次数跑到终点。可以等价与在当前加油站可以加之前经过加油站打油。"></a>思路，题意为用最少加油次数跑到终点。可以等价与在当前加油站可以加之前经过加油站打油。</h3><p>即可以用有优先队列存储加油站中的油，并切每次取最大，可保证总次数最少。</p><h3 id="代码-5"><a href="#代码-5" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100050</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> dis,fuel;</span><br><span class="line">&#125;p[N];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> node&amp; f,<span class="keyword">const</span> node&amp; s)</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> f.dis &lt; s.dis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    priority_queue&lt;<span class="keyword">int</span>&gt;station;</span><br><span class="line">    <span class="keyword">int</span> n ;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">    <span class="keyword">int</span> dis,fuel;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= n ;i ++)&#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;p[i].dis,&amp;p[i].fuel);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;dis,&amp;fuel);</span><br><span class="line"><span class="keyword">int</span> pos = dis;</span><br><span class="line">p[<span class="number">0</span>].dis = p[<span class="number">0</span>].fuel = <span class="number">0</span>;</span><br><span class="line">p[n+<span class="number">1</span>].dis = dis; p[n+<span class="number">1</span>].fuel = <span class="number">0</span>;</span><br><span class="line">sort(p,p + n + <span class="number">2</span> ,cmp); </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = n +<span class="number">1</span>  ; i &gt;= <span class="number">0</span> ;i --)&#123;</span><br><span class="line">        <span class="keyword">int</span> d = pos - p[i].dis;</span><br><span class="line">        <span class="keyword">while</span>(fuel - d &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(station.empty())&#123;</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="string">"-1"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            fuel += station.top();</span><br><span class="line">            station.pop();</span><br><span class="line">            ans ++;</span><br><span class="line">        &#125;</span><br><span class="line">        station.push(p[i].fuel);</span><br><span class="line"> fuel -= d;</span><br><span class="line">pos = p[i].dis;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2018-暑期培训"><a href="#2018-暑期培训" class="headerlink" title="2018 暑期培训"></a>2018 暑期培训</h1><h2 id="带权的时间安排问题"><a href="#带权的时间安排问题" class="headerlink" title="带权的时间安排问题"></a>带权的时间安排问题</h2><pre><code>后期遇到补齐</code></pre><h2 id="拓扑排序"><a href="#拓扑排序" class="headerlink" title="拓扑排序"></a>拓扑排序</h2><pre><code>引用维基百科的定义：在图论中，由一个有向无环图的顶点组成的序列，当且仅当满足下列条件时，称为该图的一个拓扑排序（英语：Topological sorting）。（1）每个顶点出现且只出现一次；（2）若A在序列中排在B的前面，则在图中不存在从B到A的路径。也可以定义为：    拓扑排序是对有向无环图的顶点的一种排序，它使得如果存在一条从顶点A到顶点B的路径，那么在排序中B出现在A的后面。可以理解为工程的完成先后或者一些课程的先修课程</code></pre><h3 id="拓扑排序算法过程"><a href="#拓扑排序算法过程" class="headerlink" title="拓扑排序算法过程"></a>拓扑排序算法过程</h3><pre><code>1.检查无环图中所有点的入度，将入度为0的顶点保存2.将第一步求出来的顶点的所有相邻顶点的入度减一，相当于将此点删除,3.重复检查无环图钟的入度4若得到的结果集的顶点数小于图的顶点数，则说明图中有环(有环必然存在有顶点的度始终不为0)</code></pre><h3 id="拓扑排序例题"><a href="#拓扑排序例题" class="headerlink" title="拓扑排序例题"></a>拓扑排序例题</h3><h4 id="poj1094"><a href="#poj1094" class="headerlink" title="poj1094"></a>poj1094</h4><p><img src="/2018/08/05/algorithm/poj1094.png" alt="poj1094"></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="symbol">Sample</span> Input</span><br><span class="line"><span class="number">4</span> <span class="number">6</span></span><br><span class="line">A&lt;<span class="keyword">B</span></span><br><span class="line"><span class="keyword">A&lt;C</span></span><br><span class="line"><span class="keyword">B&lt;C</span></span><br><span class="line"><span class="keyword">C&lt;D</span></span><br><span class="line"><span class="keyword">B&lt;D</span></span><br><span class="line"><span class="keyword">A&lt;B</span></span><br><span class="line"><span class="keyword">3 </span><span class="number">2</span></span><br><span class="line">A&lt;<span class="keyword">B</span></span><br><span class="line"><span class="keyword">B&lt;A</span></span><br><span class="line"><span class="keyword">26 </span><span class="number">1</span></span><br><span class="line">A&lt;Z</span><br><span class="line"><span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="symbol">Sample</span> Output</span><br><span class="line"></span><br><span class="line"><span class="symbol">Sorted</span> sequence determined after <span class="number">4</span> relations: ABCD.</span><br><span class="line"><span class="symbol">Inconsistency</span> found after <span class="number">2</span> relations.</span><br><span class="line"><span class="symbol">Sorted</span> sequence cannot <span class="keyword">be </span>determined.</span><br></pre></td></tr></table></figure><h4 id="poj1094-代码"><a href="#poj1094-代码" class="headerlink" title="poj1094 代码"></a>poj1094 代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 30</span></span><br><span class="line"><span class="keyword">int</span> <span class="built_in">map</span>[N][N];</span><br><span class="line"><span class="keyword">int</span> indexs[N];</span><br><span class="line"><span class="keyword">int</span> vex ,arc;</span><br><span class="line"><span class="keyword">int</span> queues[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(indexs,<span class="number">0</span>,<span class="keyword">sizeof</span>(indexs));</span><br><span class="line"><span class="built_in">memset</span>(<span class="built_in">map</span>,<span class="number">0</span>,<span class="keyword">sizeof</span>(<span class="built_in">map</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getindexs</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; vex ;i ++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; vex ;j ++)&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">map</span>[j][i] == <span class="number">1</span>)&#123;</span><br><span class="line">indexs[i]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">toposort</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> flag = <span class="number">1</span>;</span><br><span class="line">getindexs();</span><br><span class="line"><span class="keyword">int</span> rear = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; vex ;i ++)&#123;</span><br><span class="line"><span class="keyword">int</span> mm = <span class="number">0</span> ;</span><br><span class="line"><span class="keyword">int</span> loc = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span> ; j &lt; vex ;j ++)&#123;</span><br><span class="line"><span class="keyword">if</span>(indexs[j] == <span class="number">0</span>)&#123;</span><br><span class="line">mm++;</span><br><span class="line">loc = j;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(mm== <span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span>  <span class="number">0</span>;<span class="comment">//有环 </span></span><br><span class="line"><span class="keyword">if</span>(mm &gt; <span class="number">1</span>)</span><br><span class="line">flag = <span class="number">-1</span>;<span class="comment">//无法判别 </span></span><br><span class="line"><span class="keyword">if</span>(loc != <span class="number">-1</span>)&#123;</span><br><span class="line">indexs[loc] = <span class="number">-1</span>;</span><br><span class="line">queues[rear++] =  loc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span> ; j &lt; vex ;j ++ )&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">map</span>[loc][j]==<span class="number">1</span>)&#123;</span><br><span class="line">indexs[j]--;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>  flag;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">char</span> head,tail;</span><br><span class="line"><span class="keyword">int</span> flag ;</span><br><span class="line"><span class="keyword">bool</span> fs = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">char</span> swa ;</span><br><span class="line"><span class="keyword">bool</span> flags = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">//freopen("in.txt","r",stdin);</span></span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;vex,&amp;arc),vex || arc)&#123;</span><br><span class="line">flags = <span class="literal">false</span>;</span><br><span class="line">getchar();</span><br><span class="line">init();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; arc ; i++)&#123;</span><br><span class="line"><span class="built_in">memset</span>(indexs,<span class="number">0</span>,<span class="keyword">sizeof</span>(indexs));</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%c%c%c%c"</span>,&amp;head,&amp;swa,&amp;tail,&amp;swa);</span><br><span class="line"><span class="built_in">map</span>[head-<span class="string">'A'</span>][tail-<span class="string">'A'</span>] = <span class="number">1</span>;</span><br><span class="line"> flag = toposort();</span><br><span class="line"><span class="keyword">if</span>(flag == <span class="number">0</span>)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Inconsistency found after %d relations.\n"</span>,i+<span class="number">1</span>);</span><br><span class="line">i++;</span><br><span class="line"><span class="keyword">for</span>(;i&lt;arc;i++)</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%c%c%c%c"</span>,&amp;head,&amp;swa,&amp;tail,&amp;swa);</span><br><span class="line">flags = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(flag == <span class="number">1</span>)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Sorted sequence determined after %d relations: "</span>,i+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;vex;j++)</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"%c"</span>,queues[j]+<span class="string">'A'</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">".\n"</span>);;</span><br><span class="line">i++;</span><br><span class="line"><span class="keyword">for</span>(;i&lt;arc;i++)</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%c%c%c%c"</span>,&amp;head,&amp;swa,&amp;tail,&amp;swa);</span><br><span class="line">flags = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!flags)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Sorted sequence cannot be determined.\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h2><h3 id="最小生成树概念"><a href="#最小生成树概念" class="headerlink" title="最小生成树概念"></a>最小生成树概念</h3><pre><code>一个有 n 个结点的连通图的生成树是原图的极小连通子图，且包含原图中的所有 n 个结点，并且有保持图连通的最少的边</code></pre><h3 id="例题-1"><a href="#例题-1" class="headerlink" title="例题"></a>例题</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">题目描述</span><br><span class="line">随着如今社会的不断变化，交通问题也变得越来越重要，所以市长决定建设一些公路来方便各个城市之间的贸易和交易。</span><br><span class="line">虽然市长的想法很好，但是他也遇到了一般人也经常头疼的问题，那就是手头的经费有限……</span><br><span class="line">在规划过程中，设计师们已经预算出部分城市之间建设公路的经费需求。</span><br><span class="line">现在市长想知道，它能不能将他的m个城市在有限的经费内实现公路交通。</span><br><span class="line">如果可以的话，输出Yes，否则输出No（两个城市不一定要直接的公路相连，间接公路到达也可以。）</span><br><span class="line">输入描述:</span><br><span class="line"></span><br><span class="line">测试输入包含多条测试数据</span><br><span class="line">每个测试数据的第1行分别给出可用的经费c(&lt;1000000)，道路数目n(n&lt;10000)，以及城市数目m(&lt;100)。</span><br><span class="line">接下来的n行给出建立公路的成本信息，每行给出三个整数，分别是相连的两个城市v1、v2(0&lt;v1,v2&lt;=m)以及</span><br><span class="line">建设公路所需的成本h(h&lt;100)。</span><br><span class="line">输出描述:</span><br><span class="line"></span><br><span class="line">对每个测试用例，输出Yes或No。</span><br><span class="line">示例1</span><br><span class="line">输入</span><br><span class="line"></span><br><span class="line">20<span class="number"> 10 </span>5</span><br><span class="line">1<span class="number"> 2 </span>6</span><br><span class="line">1<span class="number"> 3 </span>3</span><br><span class="line">1<span class="number"> 4 </span>4</span><br><span class="line">1<span class="number"> 5 </span>5</span><br><span class="line">2<span class="number"> 3 </span>7</span><br><span class="line">2<span class="number"> 4 </span>7</span><br><span class="line">2<span class="number"> 5 </span>8</span><br><span class="line">3<span class="number"> 4 </span>6</span><br><span class="line">3<span class="number"> 5 </span>9</span><br><span class="line">4<span class="number"> 5 </span>2</span><br><span class="line">输出</span><br><span class="line"></span><br><span class="line">Yes</span><br><span class="line">示例2</span><br><span class="line">输入</span><br><span class="line"></span><br><span class="line">10<span class="number"> 2 </span>2</span><br><span class="line">1<span class="number"> 2 </span>5</span><br><span class="line">1<span class="number"> 2 </span>15</span><br><span class="line">输出</span><br><span class="line"></span><br><span class="line">Yes</span><br></pre></td></tr></table></figure><h3 id="prim-解法"><a href="#prim-解法" class="headerlink" title="prim 解法"></a>prim 解法</h3><h4 id="prim算法的思想"><a href="#prim算法的思想" class="headerlink" title="prim算法的思想"></a>prim算法的思想</h4><pre><code>1.从图中的一个起点a开始，把a加入U集合2.寻找从与a有关联的边中权重最小的那条边并且该边的终点b在顶点集合：（V-U）中，把b加入到集合U中，3.然后，我们寻找与a关联和b关联的边中，权重最小的那条边并且该边的终点在集合：（V-U）中，重复操作</code></pre><h4 id="prim-解法代码"><a href="#prim-解法代码" class="headerlink" title="prim 解法代码"></a>prim 解法代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这个人懒得写代码</span><br></pre></td></tr></table></figure><h4 id="Kruskal-解法"><a href="#Kruskal-解法" class="headerlink" title="Kruskal 解法"></a>Kruskal 解法</h4><h4 id="Kruskal算法思想"><a href="#Kruskal算法思想" class="headerlink" title="Kruskal算法思想"></a>Kruskal算法思想</h4><pre><code>1.先构造一个只含 n 个顶点、而边集为空的子图，把子图中各个顶点看成各棵树上的根结点，2.从网的边集 E 中选取一条权值最小的边，若该条边的两个顶点分属不同的树，则将其加入子图，反之，若该条边的两个顶点已落在同一棵树上，则不可取，3.应该取下一条权值最小的边再试之。依次类推，直到森林中只有一棵树，也即子图中含有 n-1 条边为止。</code></pre><h4 id="Kruskal-解法代码"><a href="#Kruskal-解法代码" class="headerlink" title="Kruskal 解法代码"></a>Kruskal 解法代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Kruskal</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 10050</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> father[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> u,v,weight;</span><br><span class="line">&#125;p[N];</span><br><span class="line"><span class="keyword">int</span> c,vex,arc;</span><br><span class="line"><span class="keyword">int</span> top = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addedge</span><span class="params">(<span class="keyword">int</span> head,<span class="keyword">int</span> tail,<span class="keyword">int</span> weight)</span></span>&#123;</span><br><span class="line">p[top].u = head;</span><br><span class="line">p[top].v = tail;</span><br><span class="line">p[top++].weight = weight;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> node &amp; x,<span class="keyword">const</span> node &amp; y)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> x.weight &lt; y.weight;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">finds</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(father[x] == x)</span><br><span class="line"><span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> father[x] = finds(father[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">kruskal</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> ans =  <span class="number">0</span> ;</span><br><span class="line"><span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">sort(p,p + top ,cmp);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; top ;i ++ )&#123;</span><br><span class="line"><span class="keyword">int</span> x = finds(p[i].u);</span><br><span class="line"><span class="keyword">int</span> y = finds(p[i].v);</span><br><span class="line"><span class="keyword">if</span>(x != y)&#123;</span><br><span class="line">father[x] = y;</span><br><span class="line">ans += p[i].weight;</span><br><span class="line">cnt ++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cnt == vex <span class="number">-1</span>)</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cnt &lt; vex <span class="number">-1</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ;i &lt; N ;i ++)&#123;</span><br><span class="line">father[i] = i;</span><br><span class="line">&#125;</span><br><span class="line">top = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("3.in","r",stdin);</span></span><br><span class="line"><span class="keyword">int</span> head,tail,weight;</span><br><span class="line"><span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;c,&amp;arc,&amp;vex))&#123;</span><br><span class="line">init();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; arc ; i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;head,&amp;tail,&amp;weight);</span><br><span class="line">addedge(head,tail,weight);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> flag = kruskal();</span><br><span class="line"><span class="keyword">if</span>(flag == <span class="number">-1</span> || c &lt; flag)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"No\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Yes\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h2><pre><code>DescriptionYou are trapped in a 3D dungeon and need to find the quickest way out! The dungeon is composed of unit cubes which may or may not be filled with rock. It takes one minute to move one unit north, south, east, west, up or down. You cannot move diagonally and the maze is surrounded by solid rock on all sides.Is an escape possible? If yes, how long will it take?InputThe input consists of a number of dungeons. Each dungeon description starts with a line containing three integers L, R and C (all limited to 30 in size).L is the number of levels making up the dungeon.R and C are the number of rows and columns making up the plan of each level.Then there will follow L blocks of R lines each containing C characters. Each character describes one cell of the dungeon. A cell full of rock is indicated by a &apos;#&apos; and empty cells are represented by a &apos;.&apos;. Your starting position is indicated by &apos;S&apos; and the exit by the letter &apos;E&apos;. There&apos;s a single blank line after each level. Input is terminated by three zeroes for L, R and C.OutputEach maze generates one line of output. If it is possible to reach the exit, print a line of the form    Escaped in x minute(s). where x is replaced by the shortest time it takes to escape.If it is not possible to escape, print the line    Trapped! Sample Input3 4 5S.....###..##..###.#############.####...###########.#######E1 3 3S###E####0 0 0Sample OutputEscaped in 11 minute(s).Trapped!</code></pre><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cstring&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;set&gt;</span><br><span class="line">#define N 35</span><br><span class="line">using namespace std;</span><br><span class="line">int map[N][N][N];</span><br><span class="line"></span><br><span class="line">struct point&#123;</span><br><span class="line">int x, y, z,level;</span><br><span class="line"><span class="attribute">point()&#123;</span></span><br><span class="line">&#125; </span><br><span class="line">point(int xx, int yy,  int  zz , int levellevl)&#123;</span><br><span class="line">x =xx; y =yy ; z = zz; level = levellevl;</span><br><span class="line">&#125;</span><br><span class="line">void operator = (point&amp; other)&#123;</span><br><span class="line">x = other.x;</span><br><span class="line">y = other.y;</span><br><span class="line">z = other.z;</span><br><span class="line">level = other.level;</span><br><span class="line">&#125;</span><br><span class="line">bool operator == (point&amp; other)&#123;</span><br><span class="line">return x == other.x &amp;&amp; y == other.y &amp;&amp; z == other.z;</span><br><span class="line">&#125;</span><br><span class="line">&#125;start,end;</span><br><span class="line">int l,r,c;</span><br><span class="line">int dx[] = &#123;1,0,0,-1,0,0&#125;;</span><br><span class="line">int dy[] = &#123;0,1,0,0,-1,0&#125;;</span><br><span class="line">int dz[] = &#123;0,0,1,0,0,-1&#125;; </span><br><span class="line"><span class="attribute">set&lt;int&gt;visit;</span></span><br><span class="line">int bfs(point s, point e)&#123;</span><br><span class="line"><span class="attribute">queue&lt;point&gt;q;</span></span><br><span class="line">q.push(s);</span><br><span class="line"><span class="attribute">while(!q.empty())&#123;</span></span><br><span class="line">point front  = q.front();</span><br><span class="line">q.pop(); </span><br><span class="line">if(front == e)&#123;</span><br><span class="line">return front.level;</span><br><span class="line">&#125;</span><br><span class="line">for(int i = 0 ; i &lt; 6 ;i ++ )&#123;</span><br><span class="line">if( (front.x + dx[i] &lt; l &amp;&amp; front.x + dx[i] &gt;= 0 ) &amp;&amp;</span><br><span class="line">(front.y + dy[i] &lt; r &amp;&amp; front.y + dy[i] &gt;= 0) &amp;&amp;</span><br><span class="line">(front.z + dz[i] &lt; c &amp;&amp; front.z + dz[i] &gt;= 0) &amp;&amp; </span><br><span class="line"> map[front.x + dx[i]][front.y + dy[i]][front.z + dz[i]] )&#123;</span><br><span class="line"> //printf("-&gt;&gt; %d",visit.find((front.x +dx[i])* 10000 + (front.y + dy[i])  * 100 + front.z + dz[i]) == visit.end()) ;</span><br><span class="line">if(visit.find(( (front.x +dx[i])* 10000 + (front.y + dy[i])  * 100 + front.z + dz[i])) == visit.end())&#123;</span><br><span class="line">q.push(point(front.x + dx[i],front.y + dy[i],front.z + dz[i],front.level +1));</span><br><span class="line">visit.insert( (front.x +dx[i]) * 10000 + (front.y + dy[i])  * 100 + front.z + dz[i] );</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return -1;</span><br><span class="line">&#125;</span><br><span class="line">int deal(char tmp)&#123;</span><br><span class="line">switch (tmp)&#123;</span><br><span class="line">case '#': return 0;</span><br><span class="line">case '.': </span><br><span class="line">case 'S':</span><br><span class="line">case 'E': return 1;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">void print()&#123;</span><br><span class="line">for(int i = 0 ; i &lt; l ;i ++)&#123;</span><br><span class="line">for(int j = 0 ; j &lt; r ;j ++)&#123;</span><br><span class="line">for( int z = 0 ; z &lt; c ; z ++)&#123;</span><br><span class="line">printf("%d ",map[i][j][z]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">printf("\n");</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">void init()&#123;</span><br><span class="line"><span class="attribute">memset(map,0,sizeof(map));</span></span><br><span class="line">visit.clear();</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">char tmp;</span><br><span class="line">while(scanf("%d%d%d",&amp;l,&amp;r,&amp;c) , ( l  || r  || c  ))&#123;</span><br><span class="line"><span class="attribute">init();</span></span><br><span class="line">for(int i = 0 ; i &lt; l ;i ++)&#123;</span><br><span class="line">for(int j = 0 ; j &lt; r ;j ++)&#123;</span><br><span class="line">for( int z = 0 ; z &lt; c ; z ++)&#123;</span><br><span class="line">scanf("%c",&amp;tmp);</span><br><span class="line">if(tmp == ' ' || tmp == '\n')&#123;</span><br><span class="line"><span class="attribute">z--;</span></span><br><span class="line">continue;</span><br><span class="line">&#125;</span><br><span class="line">map[i][j][z] = deal(tmp);</span><br><span class="line">if(tmp == 'S')&#123;</span><br><span class="line">start.x = i; start.y = j; start.z = z;</span><br><span class="line">&#125;</span><br><span class="line">if(tmp == 'E')&#123;</span><br><span class="line">end.x = i; end.y = j; end.z = z ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">//cout&lt;&lt;bfs(start,end)&lt;&lt;endl;</span><br><span class="line">int ans = bfs(start,end);</span><br><span class="line">if(ans == -1)&#123;</span><br><span class="line"><span class="attribute">printf("Trapped!\n");</span></span><br><span class="line">&#125;</span><br><span class="line">else &#123;</span><br><span class="line">printf("Escaped in %d minute(s).\n",ans);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="差分约束"><a href="#差分约束" class="headerlink" title="差分约束"></a>差分约束</h2><h3 id="差分约束基本讲解"><a href="#差分约束基本讲解" class="headerlink" title="差分约束基本讲解"></a>差分约束基本讲解</h3><p><img src="/2018/08/05/algorithm/差分约束1.png" alt="查分约束"><br><img src="/2018/08/05/algorithm/差分约束2.png" alt="查分约束"><br><img src="/2018/08/05/algorithm/差分约束3.png" alt="查分约束"></p><h3 id="例题-2"><a href="#例题-2" class="headerlink" title="例题"></a>例题</h3><pre><code>poj1201DescriptionYou are given n closed, integer intervals [ai, bi] and n integers c1, ..., cn.Write a program that:reads the number of intervals, their end points and integers c1, ..., cn from the standard input,computes the minimal size of a set Z of integers which has at least ci common elements with interval [ai, bi], for each i=1,2,...,n,writes the answer to the standard output.InputThe first line of the input contains an integer n (1 &lt;= n &lt;= 50000) -- the number of intervals. The following n lines describe the intervals. The (i+1)-th line of the input contains three integers ai, bi and ci separated by single spaces and such that 0 &lt;= ai &lt;= bi &lt;= 50000 and 1 &lt;= ci &lt;= bi - ai+1.OutputThe output contains exactly one integer equal to the minimal size of set Z sharing at least ci elements with interval [ai, bi], for each i=1,2,...,n.Sample Input53 7 38 10 36 8 11 3 110 11 1Sample Output6</code></pre><h3 id="思路-4"><a href="#思路-4" class="headerlink" title="思路"></a>思路</h3><pre><code>令xi 为[0,xi]中的个数中整数点的个数则可以依据题目列出 s[bi] - s[ai-1] &gt;= ci再根据用查分系统可以想到用spfa 求解这一组不等式注意的是题目中应该还有 1=&gt;s[bi+1]-s[bi] &gt;=0 这个约束</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> next,t ,w,s;</span><br><span class="line">&#125;e[<span class="number">3</span>*N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> dis[N];</span><br><span class="line"><span class="keyword">int</span> head[N];</span><br><span class="line"><span class="keyword">int</span> vex ,arc;</span><br><span class="line"><span class="keyword">int</span> top = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addedge</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span></span>&#123; <span class="comment">// 伪链表 ， 头插法 </span></span><br><span class="line">e[top].s = s; </span><br><span class="line">e[top].t = t;</span><br><span class="line">e[top].w = w;</span><br><span class="line">e[top].next = head[s];</span><br><span class="line">head[s] = top++;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">bool</span> visit[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> source)</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;s; </span><br><span class="line">dis[source] = <span class="number">0</span>;</span><br><span class="line">visit[source]= <span class="literal">true</span>;</span><br><span class="line">s.push(source); </span><br><span class="line"><span class="keyword">while</span>(!s.empty())&#123;</span><br><span class="line"><span class="keyword">int</span> front  = s.front();</span><br><span class="line">visit[front] = <span class="literal">false</span>;</span><br><span class="line">s.pop();</span><br><span class="line"><span class="keyword">int</span> p = head[front];</span><br><span class="line"><span class="keyword">while</span> (p != <span class="number">-1</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(dis[e[p].t] &gt; dis[e[p].s] + e[p].w)&#123;</span><br><span class="line">dis[e[p].t] =  dis[e[p].s] + e[p].w;</span><br><span class="line"><span class="keyword">if</span>(!visit[e[p].t])&#123;</span><br><span class="line">s.push(e[p].t);</span><br><span class="line">visit[e[p].t] = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">p = e[p].next;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> maxs,mins ; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">top = <span class="number">0</span>;</span><br><span class="line">fill(dis,dis+N,<span class="number">1</span> &lt;&lt; <span class="number">30</span>);</span><br><span class="line"><span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line"><span class="built_in">memset</span>(visit,<span class="number">0</span>,<span class="keyword">sizeof</span>(visit));</span><br><span class="line">maxs = <span class="number">-1</span>;</span><br><span class="line">mins = <span class="number">1</span>&lt;&lt;<span class="number">30</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> a , b, c;</span><br><span class="line"><span class="comment">//freopen("input.txt","r",stdin);</span></span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)!=EOF)&#123;</span><br><span class="line"></span><br><span class="line">init();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; n ;i ++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">addedge(b+<span class="number">1</span>,a,-c);</span><br><span class="line">maxs = max(b+<span class="number">1</span>,maxs);</span><br><span class="line">mins = min(a,mins);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = mins;i &lt; maxs ; i++)&#123;</span><br><span class="line">addedge(i+<span class="number">1</span>,i,<span class="number">0</span>);</span><br><span class="line">addedge(i,i+<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">spfa(maxs);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span> ,-dis[mins] );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="最短路径"><a href="#最短路径" class="headerlink" title="最短路径"></a>最短路径</h2><p><em>这里只提四种常见的算法，分别是dijkstra，Floyd，bellman_ford,spfa</em></p><h3 id="dijkstra"><a href="#dijkstra" class="headerlink" title="dijkstra"></a>dijkstra</h3><h4 id="dijkstra-策略"><a href="#dijkstra-策略" class="headerlink" title="dijkstra 策略"></a>dijkstra 策略</h4><pre><code>dijkstra 采用了一种贪心策略定义了最短路径集合，当发现一个已经是最短路径的顶点是，则将这个顶点加入到最短路径的集合中。当算法做到最短路径集合中包含全部顶点是，则算法结束</code></pre><h4 id="dijkstra-例题"><a href="#dijkstra-例题" class="headerlink" title="dijkstra 例题"></a>dijkstra 例题</h4><pre><code>后续补齐</code></pre><h4 id="dijstra-代码"><a href="#dijstra-代码" class="headerlink" title="dijstra 代码"></a>dijstra 代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">同样后续补齐</span><br></pre></td></tr></table></figure><h3 id="bellman-ford"><a href="#bellman-ford" class="headerlink" title="bellman_ford"></a>bellman_ford</h3><h4 id="bellman-ford-例题"><a href="#bellman-ford-例题" class="headerlink" title="bellman_ford 例题"></a>bellman_ford 例题</h4><pre><code>后续补齐</code></pre><h4 id="bellman-ford-代码"><a href="#bellman-ford-代码" class="headerlink" title="bellman_ford 代码"></a>bellman_ford 代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">同样后续补齐</span><br></pre></td></tr></table></figure><h3 id="spfa"><a href="#spfa" class="headerlink" title="spfa"></a>spfa</h3><h4 id="spfa-策略"><a href="#spfa-策略" class="headerlink" title="spfa 策略"></a>spfa 策略</h4><pre><code>bellman_ford 的队列优化版本相比较bellman_ford 需要对每一条边进行松弛而言，spfa只需要对已知的最短路进行松弛，因此效率提高。但是，当图特别稠密时，spfa也就退化和bellman_ford 一样</code></pre><h4 id="spfa-例题"><a href="#spfa-例题" class="headerlink" title="spfa 例题"></a>spfa 例题</h4><pre><code>虽然草儿是个路痴（就是在杭电待了一年多，居然还会在校园里迷路的人，汗~),但是草儿仍然很喜欢旅行，因为在旅途中还能丰富自己的阅历，还可以看美丽的风景……所以草儿决定在要在最短的时间去一个自己想去的地方！因为草儿的家在一个小镇上，没有火车经过，所以她只能去邻近的城市坐火车Input输入数据有多组，每组的第一行是三个整数T，S和D，表示有T条路，和草儿家相邻的城市的有S个，草儿想去的地方有D个；接着有T行，每行有三个整数a，b，time,表示a,b城市之间的车程是time小时；(1=&lt;(a,b)&lt;=1000;a,b 之间可能有多条路)接着的第T+1行有S个数，表示和草儿家相连的城市；接着的第T+2行有D个数，表示草儿想去地方。Output输出草儿能去某个喜欢的城市的最短时间。Sample Input6 2 31 3 51 4 72 8 123 8 44 9 129 10 21 28 9 10Sample Output9</code></pre><h4 id="spfa-代码"><a href="#spfa-代码" class="headerlink" title="spfa 代码"></a>spfa 代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 10050</span></span><br><span class="line"><span class="keyword">int</span> T ,S,D;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> s,t,w,next;</span><br><span class="line">&#125;e[N];</span><br><span class="line"><span class="keyword">int</span> vex,arc;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;want;</span><br><span class="line"><span class="keyword">int</span> head[N];</span><br><span class="line"><span class="keyword">int</span> top;</span><br><span class="line"><span class="keyword">int</span> dis[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">    top = <span class="number">0</span>;</span><br><span class="line">    fill(dis,dis + N ,<span class="number">1</span>&lt;&lt; <span class="number">30</span>);</span><br><span class="line">    want.clear();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addedge</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> weight)</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    e[top].s = a;</span><br><span class="line">    e[top].t = b;</span><br><span class="line">    e[top].w = weight;</span><br><span class="line">    e[top].next = head[a];    </span><br><span class="line">    head[a] = top++; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bellman_ford</span><span class="params">()</span></span>&#123;</span><br><span class="line">    dis[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; vex ;i ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(head[i] == <span class="number">-1</span>)&#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span> ;j &lt; arc ; j ++)&#123;</span><br><span class="line">            </span><br><span class="line">                <span class="keyword">if</span>(dis[e[j].t]&gt; dis [e[j].s] + e[j].w)&#123;</span><br><span class="line">                    dis[e[j].t] = dis [e[j].s] + e[j].w;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> visit[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">()</span></span>&#123;</span><br><span class="line">    priority_queue&lt;<span class="keyword">int</span>&gt;s;</span><br><span class="line">    dis[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    s.push(<span class="number">0</span>);</span><br><span class="line">    visit[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span>(!s.empty())&#123;</span><br><span class="line">        <span class="keyword">int</span> front = s.top();</span><br><span class="line">        s.pop();</span><br><span class="line">        visit[front] = <span class="literal">false</span>; </span><br><span class="line">        <span class="keyword">int</span> p = head[front];</span><br><span class="line">        <span class="keyword">while</span>(p != <span class="number">-1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(dis[e[p].t]&gt; dis[e[p].s] + e[p].w)&#123;</span><br><span class="line">                dis[e[p].t] = dis[e[p].s] + e[p].w;</span><br><span class="line">                <span class="keyword">if</span>(!visit[e[p].t])</span><br><span class="line">                &#123;</span><br><span class="line">                    s.push(e[p].t);</span><br><span class="line">                    visit[e[p].t] = <span class="literal">true</span>;    </span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">            p = e[p].next; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> min = <span class="number">1</span> &lt;&lt; <span class="number">30</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator it = want.begin() ; it != want.end() ;it ++)&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(dis[(*it)] &lt; min)</span><br><span class="line">            min = dis[(*it)];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> min;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, b , time;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;T,&amp;S,&amp;D)!=EOF)&#123;</span><br><span class="line">        init();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ;i &lt; T ;i ++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;a,&amp;b,&amp;time);</span><br><span class="line">            addedge(a,b,time);</span><br><span class="line">            addedge(b,a,time);</span><br><span class="line">            vex = max(vex,max(a,b));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i  = <span class="number">0</span> ; i&lt; S ; i++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;b);</span><br><span class="line">            addedge(b,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">            addedge(<span class="number">0</span>,b,<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ;i &lt; D ; i++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;b);</span><br><span class="line">            want.push_back(b);</span><br><span class="line">        &#125;    </span><br><span class="line">        arc = T + S;        </span><br><span class="line">        <span class="comment">//bellman_ford();</span></span><br><span class="line">        spfa();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,solve());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="莫比乌斯反演"><a href="#莫比乌斯反演" class="headerlink" title="莫比乌斯反演"></a>莫比乌斯反演</h2><h3 id="莫比乌斯引入"><a href="#莫比乌斯引入" class="headerlink" title="莫比乌斯引入"></a>莫比乌斯引入</h3><pre><code>先看一个函数     $$\sum_{i=0}^{n}$  \prod_\epsilon$$</code></pre><hr><h2 id="高斯消元"><a href="#高斯消元" class="headerlink" title="高斯消元"></a>高斯消元</h2><h3 id="高斯消元方法和主元的处理"><a href="#高斯消元方法和主元的处理" class="headerlink" title="高斯消元方法和主元的处理"></a>高斯消元方法和主元的处理</h3><p><em>高斯消元法，是线性代数中的一个算法，可用来求解线性方程组，并可以求出矩阵的秩，以及求出可逆方阵的逆矩阵</em><br><em>高斯消元法的原理是</em>：若用初等行变换将增广矩阵 化为 ，则AX = B与CX = D是同解方程组<br>高斯消元的注意事项：</p><ol><li>主元的处理：<br><em>因为在计算机中有效数字有限，这会导致计算机计算的结果出现比较大的偏差，下面看一个例子</em></li></ol><pre><code>0.0001x1+x2=1x1+x2=2解为x1=10000/9999, x2=9998/9999但是高斯消元会出现 （1-10000)x2=2-10000因为有效数字有限，计算机的浮点减法处理时可能把1及2弄没了，于是 得到0.0001x1+x2=1-10000x2=-10000,解为x2=1,x1=0, 显然不对。为了避免这个问题，应交换方程的位置，使得主元在这一列中最大X1 +x2=20.0001x1+x2=1但是高斯消元会出现 （1-0.0001)x2=1-0.0002计算机的浮点减法处理时也可能把0.0001及0.0002弄没了，于是 得到x1+x2=2x2=1,解为x2=1,x1=1,为了避免精度问题，我们可以在写程序的时候可以将当前行与主元绝对值最大的行交换，既不影响结果，也避免了精度问题</code></pre><p><img src="/2018/08/05/algorithm/Guass.png" alt="高斯消元"></p><h3 id="高斯消元例题"><a href="#高斯消元例题" class="headerlink" title="高斯消元例题"></a>高斯消元例题</h3><pre><code>题目大意：有 N 盏灯，M 个开关，每个开关可以控制多盏灯，每盏灯可以被多盏开关控制。开始每盏灯都是开闭状态，给定每盏灯的最终状态，问有多少种方案可以到达。</code></pre><h3 id="思路提示"><a href="#思路提示" class="headerlink" title="思路提示"></a>思路提示</h3><pre><code>1、因为有n盏灯，m个开关，对于每一盏灯可以列一个等式。对每一个开关可以看做一个变量。在列出这些之后可以得到一个增广矩阵。得到增广矩阵之后我们就很自然的得到解的情况，即无解，和有解的情况，由线性代数的知识可以得到     自由变量 = 变量的个数 – 秩(有解情况下系数矩阵的秩 = 增广矩阵的秩)又因为灯只有两种情况 ， 所以方案数 =  2^自由变量的个数</code></pre><h3 id="代码-6"><a href="#代码-6" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 55</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">bool</span> maxtrix[N][N], copymaxtrix[N][N];</span><br><span class="line">ll n , m ; <span class="comment">// 矩阵的行数，和列数 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"---------------------Debug----------------"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ;i &lt;=n ; i ++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span> ;j &lt;= m+<span class="number">1</span>;j ++)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d "</span>,copymaxtrix[i][j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"---------------------end Debug----------------"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">Gauss</span><span class="params">()</span></span>&#123;</span><br><span class="line">ll r = <span class="number">0</span>; <span class="comment">// r 为矩阵的秩 </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m ;i ++)&#123; <span class="comment">// 从第一列开始，处理主元 </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = r+<span class="number">1</span> ;j &lt;= n; j++ ) &#123;</span><br><span class="line"><span class="keyword">if</span>(copymaxtrix[j][i])&#123; <span class="comment">// 找到这一列中，不为 0 的数，将此行与当前行替换 </span></span><br><span class="line"><span class="keyword">for</span>( <span class="keyword">int</span> k = <span class="number">1</span> ;k &lt;= m+<span class="number">1</span> ;k ++ )&#123;</span><br><span class="line">swap(copymaxtrix[r+<span class="number">1</span>][k],copymaxtrix[j][k]);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//print();</span></span><br><span class="line"><span class="keyword">if</span>(!copymaxtrix[r+<span class="number">1</span>][i])&#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n ;j ++ )&#123;</span><br><span class="line"><span class="keyword">if</span>(r+<span class="number">1</span> != j &amp;&amp; copymaxtrix[j][i])&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k = i; k &lt;= m +<span class="number">1</span> ;k ++ )&#123;</span><br><span class="line">copymaxtrix[j][k] ^= copymaxtrix[r+<span class="number">1</span>][k];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">r++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//print();</span></span><br><span class="line"><span class="comment">//cout&lt;&lt;"Debug -&gt; "&lt;&lt;r&lt;&lt;endl;</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = r + <span class="number">1</span> ;i &lt;= n ;i ++ )&#123;</span><br><span class="line"><span class="keyword">if</span>(copymaxtrix[i][m+<span class="number">1</span>])</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>  m - r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"><span class="keyword">int</span> tmpsum, index;</span><br><span class="line"><span class="keyword">int</span> query;</span><br><span class="line"><span class="comment">//freopen("./input.txt","r",stdin);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line"><span class="keyword">for</span>( <span class="keyword">int</span> cas = <span class="number">1</span>; cas &lt;= T ;cas ++ )&#123;</span><br><span class="line"><span class="built_in">scanf</span>( <span class="string">"%d%d"</span> , &amp;n ,&amp;m);</span><br><span class="line"><span class="built_in">memset</span>( maxtrix,<span class="number">0</span>,<span class="keyword">sizeof</span>(maxtrix));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i= <span class="number">1</span> ;i &lt;= m ; i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;tmpsum);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span> ; j &lt;= tmpsum ;j ++ )&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;index);</span><br><span class="line">maxtrix[index][i] = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>( <span class="string">"Case %d:\n"</span>,cas);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;query);</span><br><span class="line"><span class="keyword">while</span>( query -- )&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ;i &lt;= n ;i ++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span> ; j &lt;= m; j++)&#123;</span><br><span class="line">copymaxtrix[i][j] = maxtrix[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i= <span class="number">1</span> ;i &lt;= n ;i ++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;tmpsum);</span><br><span class="line">copymaxtrix[i][m+<span class="number">1</span>] = tmpsum;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//print();</span></span><br><span class="line">ll ans = Gauss();</span><br><span class="line"><span class="keyword">if</span>(ans == <span class="number">-1</span>)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"0\n"</span>); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,(ll)<span class="number">1</span>&lt;&lt;ans);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="中国剩余定理"><a href="#中国剩余定理" class="headerlink" title="中国剩余定理"></a>中国剩余定理</h2><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><pre><code>今有物不知其数，三三数之剩二，五五数之剩三，七七数之剩二。问物几何？</code></pre><h4 id="互质版"><a href="#互质版" class="headerlink" title="互质版"></a>互质版</h4><h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><pre><code>假设题中所有的除数都是互质的1、x = 2 mod 3 2、x = 3 mod 53、x = 2 mod 7首先先求出 3， 5 ， 7 的最小公倍数，得105，再将 105 除以 1式中的余数，则生35.此35可以整除除了1式之外的所有式子，且不能整除1式，将 35 mod 3 得到 一个余数 .    记    4、 35 = 2 mod 3  。对比1式，如果我们4、式同时乘 1式中的余数 / 4 式中的余数。同理对其他式子进行一样的操作（注：实际代码中并不是这样作的，而是通过逆元而得到，具体见下）    则最后得到的即为结果总结一下 所以，问题解法的本质是从5和7的公倍数中找一个除以3余2的数n1，从3和7的公倍数中找一个除以5余3的数n2，从3和5的公倍数中找一个除以7余2的数n3，再将三个数相加得到解。在求n1，n2，n3时又用了一个小技巧，以n1为例，并非从5和7的公倍数中直接找一个除以3余2的数，而是先找一个除以3余1的数，再乘以2。也就是先求出5和7的公倍数模3下的逆元，再用逆元去乘余数。</code></pre><h4 id="公式（互质版）"><a href="#公式（互质版）" class="headerlink" title="公式（互质版）"></a>公式（互质版）</h4><p><img src="/2018/08/05/algorithm/中国剩余定理.jpeg" alt="中国剩余定理"></p><h4 id="非互质版"><a href="#非互质版" class="headerlink" title="非互质版"></a>非互质版</h4><pre><code>当题中的除数不是互质的时候，上述互质的方法就不满足使用的条件了。因此，我们需要通过方程合并，将方程合并成为一个方程</code></pre><h4 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h4><p>图片来自网络<br><img src="/2018/08/05/algorithm/CRT.png" alt="CRT"></p><h3 id="例题-3"><a href="#例题-3" class="headerlink" title="例题"></a>例题</h3><pre><code>Choose k different positive integers a1, a2, …, ak.For some non-negative m, divide it by every ai (1 ≤ i ≤ k) to find the remainder ri. If a1, a2, …, ak are properly chosen, m can be determined,then the pairs (ai, ri) can be used to express m.“It is easy to calculate the pairs from m, ” said Elina. “But how can I find m from the pairs?”Since Elina is new to programming, this problem is too difficult for her. Can you help her?</code></pre><h3 id="代码-7"><a href="#代码-7" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 10050</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line">LL k;</span><br><span class="line">LL a[N], r[N];</span><br><span class="line"><span class="function">LL <span class="title">ex_gcd</span><span class="params">(LL x, LL y, LL &amp;u, LL &amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (y == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        u = <span class="number">1</span>;</span><br><span class="line">        v = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        LL d = ex_gcd(y, x % y, u, v);</span><br><span class="line">        LL tmp = u;</span><br><span class="line">        u = v;</span><br><span class="line">        v = tmp - x / y * v;</span><br><span class="line">        <span class="keyword">return</span> d;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">ins</span><span class="params">(LL x, LL y)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//get x^-1 mod y</span></span><br><span class="line">    LL u, v;</span><br><span class="line">    LL d = ex_gcd(x, y, u, v);</span><br><span class="line">    <span class="keyword">if</span> (d != <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (u % y + y) % y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">ex_CRT</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LL a0 = a[<span class="number">0</span>], r0 = r[<span class="number">0</span>]; <span class="comment">// init;</span></span><br><span class="line">    LL k1, k2;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; k; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        LL a1 = a[i], r1 = r[i];</span><br><span class="line">        LL d = ex_gcd(r0, r1, k1, k2);</span><br><span class="line">        LL c = a1 - a0;</span><br><span class="line">        <span class="keyword">if</span> ((c % d))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            c = ((c % r1) + r1) % r1;</span><br><span class="line">            c /= d;</span><br><span class="line">            r0 /= d;</span><br><span class="line">            r1 /= d;</span><br><span class="line">            c *= ins(r0, r1);</span><br><span class="line">            <span class="comment">//  LL t = r0 * r1 * d;</span></span><br><span class="line">            c %= r1;</span><br><span class="line">            c = (c * r0 * d);</span><br><span class="line">            c += a0;</span><br><span class="line">            r0 = r0 * r1 * d;</span><br><span class="line">            a0 = (c % r0 + r0) % r0;</span><br><span class="line">        &#125;</span><br><span class="line">       <span class="comment">// printf("%lld %lld\n", a0, r0);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (a0 % r0 + r0) % r0;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &amp;k))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (LL i = <span class="number">0</span>; i &lt; k; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>, &amp;r[i], &amp;a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ex_CRT());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;挑战程序设计竞赛练习&quot;&gt;&lt;a href=&quot;#挑战程序设计竞赛练习&quot; class=&quot;headerlink&quot; title=&quot;挑战程序设计竞赛练习&quot;&gt;&lt;/a&gt;挑战程序设计竞赛练习&lt;/h1&gt;&lt;h2 id=&quot;并查集&quot;&gt;&lt;a href=&quot;#并查集&quot; class=&quot;header
      
    
    </summary>
    
      <category term="algorithm" scheme="http://yoursite.com/categories/algorithm/"/>
    
    
      <category term="algorithm" scheme="http://yoursite.com/tags/algorithm/"/>
    
  </entry>
  
  <entry>
    <title>markdown</title>
    <link href="http://yoursite.com/2018/08/05/markdown/"/>
    <id>http://yoursite.com/2018/08/05/markdown/</id>
    <published>2018-08-05T04:38:22.000Z</published>
    <updated>2018-08-06T05:50:13.168Z</updated>
    
    <content type="html"><![CDATA[<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p><strong>马克编辑器</strong> 是一个全功能的 <code>markdown</code> 编辑器，它包含了以下特性：</p><ol><li>创建，编辑和预览 <code>markdown</code> 文档。</li><li>将你的文档同步到 <strong>Dropbox</strong>。</li><li>将你的文档通过 Email 发送给其他人。</li></ol><p>这个编辑器使用 <code>markdown</code> 语法，让你能够创造格式漂亮的文档。这个语法非常简单，和你使用纯为本几乎没什么区别。</p><h2 id="Markdown-语法"><a href="#Markdown-语法" class="headerlink" title="Markdown 语法"></a>Markdown 语法</h2><h3 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h3><hr><p>在行首输入 1－6 个 <code>#</code> 符号。符号的个数决定了标题的层级：</p><h1 id="1级标题"><a href="#1级标题" class="headerlink" title="1级标题"></a>1级标题</h1><h2 id="2级标题"><a href="#2级标题" class="headerlink" title="2级标题"></a>2级标题</h2><h3 id="3级标题"><a href="#3级标题" class="headerlink" title="3级标题"></a>3级标题</h3><h4 id="4级标题"><a href="#4级标题" class="headerlink" title="4级标题"></a>4级标题</h4><h5 id="5级标题"><a href="#5级标题" class="headerlink" title="5级标题"></a>5级标题</h5><h6 id="6级标题"><a href="#6级标题" class="headerlink" title="6级标题"></a>6级标题</h6><h3 id="强调"><a href="#强调" class="headerlink" title="强调"></a>强调</h3><hr><p>加粗：</p><p><strong>加粗文本</strong></p><p>斜体：</p><p><em>斜体文本</em></p><h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><hr><p><a href="http://example.com/" target="_blank" rel="noopener">链接文本</a></p><h3 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h3><hr><p><img src="http://lkl.mx/img/EkZYGsPBg" alt="图片标题"></p><h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><hr><p>有序列表:</p><ol><li>第一项</li><li>第二项</li><li>第三项</li></ol><p>无序列表:</p><ul><li>列表项</li><li>列表项</li><li>列表项</li></ul><h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><hr><blockquote><p>Stay hungry, stay foolish.</p></blockquote><h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><hr><p>行内代码：<code>foo.go()</code> .</p><p>多行代码：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let app = <span class="string">"Markdown"</span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"Good"</span>)</span></span></span><br></pre></td></tr></table></figure></p><h3 id="缩紧代码"><a href="#缩紧代码" class="headerlink" title="缩紧代码"></a>缩紧代码</h3><hr><p>四个空格或者一个 Tab 表示缩进代码：</p><p>这是一个普通的段落。</p><pre><code>这是一个代码块</code></pre><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><hr><p>简单的表格:</p><table><thead><tr><th>标题</th><th>标题</th><th>标题</th></tr></thead><tbody><tr><td>单元格</td><td>单元格</td><td>单元格</td></tr><tr><td>单元格</td><td>单元格</td><td>单元格</td></tr></tbody></table><p>你还可以添加一些边框：</p><table><thead><tr><th>标题</th><th>标题</th><th>标题</th></tr></thead><tbody><tr><td>单元格</td><td>单元格</td><td>单元格</td></tr><tr><td>单元格</td><td>单元格</td><td>单元格</td></tr></tbody></table><p>你可以控制单元格的对齐方式：</p><table><thead><tr><th style="text-align:left">标题</th><th style="text-align:center">标题</th><th style="text-align:right">标题</th></tr></thead><tbody><tr><td style="text-align:left">左</td><td style="text-align:center">中</td><td style="text-align:right">右</td></tr><tr><td style="text-align:left">左</td><td style="text-align:center">中</td><td style="text-align:right">右</td></tr></tbody></table><h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><hr><p><del>Strikethrough</del></p><h3 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h3><hr><p>三种类型的分割线:</p><hr><hr><hr><h3 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h3><hr><p>一 在行尾添加两个空格或者换行符代表换行：</p><p>这行的行尾油两个空格<br>这是一个新行。    </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;基本使用&quot;&gt;&lt;a href=&quot;#基本使用&quot; class=&quot;headerlink&quot; title=&quot;基本使用&quot;&gt;&lt;/a&gt;基本使用&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;马克编辑器&lt;/strong&gt; 是一个全功能的 &lt;code&gt;markdown&lt;/code&gt; 编辑器，它包含了以
      
    
    </summary>
    
      <category term="categories" scheme="http://yoursite.com/categories/categories/"/>
    
    
      <category term="markdown" scheme="http://yoursite.com/tags/markdown/"/>
    
  </entry>
  
</feed>
